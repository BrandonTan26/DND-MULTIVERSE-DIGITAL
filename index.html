<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Katalog Layanan Digital — D&D Multiverse Digital</title>

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Sora:wght@600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#ffffff;
      --surface:#ffffff;
      --surface-2:#f8fafc;
      --text:#0f172a;
      --muted:#64748b;
      --border:#e2e8f0;
      --shadow: 0 10px 26px rgba(15, 23, 42, .06);
      --shadow-hover: 0 14px 34px rgba(15, 23, 42, .10);
      --radius: 18px;

      --primary:#1d4ed8;
      --primary-2:#2563eb;
      --accent:#f97316;
      --success:#10b981;
    }

    *{box-sizing:border-box}
    body{
      font-family:'Manrope', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      line-height:1.6;
    }
    a{color:inherit}
    .page-wrap{min-height:100vh;background:var(--bg)}

    .hero{
      padding:2.2rem 0 1.4rem;
      border-bottom:1px solid var(--border);
      background:var(--bg);
    }
    .hero .pill{
      display:inline-flex; align-items:center; gap:.55rem;
      padding:.55rem .95rem;
      border-radius:999px;
      background:var(--surface);
      border:1px solid var(--border);
      color:var(--primary);
      font-weight:800;
      font-size:.92rem;
    }
    .hero h1{
      font-family:'Sora',sans-serif;
      font-weight:900;
      letter-spacing:-.03em;
      margin:.9rem 0 .6rem;
      font-size:clamp(1.75rem, 3.5vw, 2.7rem);
      line-height:1.12;
      text-align:center;
    }
    .hero p{
      color:var(--muted);
      max-width: 820px;
      margin:0 auto 1rem;
      font-size:1.02rem;
      text-align:center;
    }

    .tools{padding:1.2rem 0 0; background:var(--bg);}
    .tools-card{
      background:var(--surface);
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding: 1rem;
      box-shadow: var(--shadow);
    }
    .label{font-weight:900;color:var(--text);font-size:.92rem;margin-bottom:.35rem}
    .control{
      border:1px solid var(--border);
      border-radius: 14px;
      padding:.85rem .95rem;
      background: #fff;
      transition:.2s ease;
      font-weight:700;
      color:var(--text);
    }
    .control::placeholder{color:#94a3b8; font-weight:600}
    .control:focus{
      border-color: rgba(37, 99, 235, .55);
      box-shadow: 0 0 0 4px rgba(37, 99, 235, .10);
    }
    .search-wrap{position:relative}
    .search-ico{position:absolute;left:14px;top:50%;transform:translateY(-50%);color:#94a3b8;pointer-events:none}
    .search-input{padding-left: 2.75rem}

    .section{padding: 1.8rem 0 2.5rem; background:var(--bg);}
    .section-head{text-align:center;margin-bottom: 1.1rem}
    .section-title{
      font-family:'Sora',sans-serif;
      font-weight:900;
      letter-spacing:-.02em;
      font-size:1.6rem;
      margin:0 0 .25rem;
    }
    .section-sub{margin:0 auto;max-width: 820px;color:var(--muted);font-size:.95rem}

    .grid{
      display:grid;
      gap: 1.05rem;
      grid-template-columns: repeat(12, 1fr);
      margin-top: 1.2rem;
    }
    .grid-item{grid-column: span 12;}
    @media (min-width:576px){ .grid-item{ grid-column: span 6; } }
    @media (min-width:992px){ .grid-item{ grid-column: span 4; } }
    @media (min-width:1200px){ .grid-item{ grid-column: span 3; } }

    .cardx{
      height:100%;
      background:var(--surface);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      transition:.22s ease;
      cursor:pointer;
      position:relative;
    }
    .cardx:hover{transform: translateY(-3px);box-shadow: var(--shadow-hover);border-color:#dbe3f1}
    .cardx-head{
      padding: 1rem 1rem .6rem;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:.8rem;
    }
    .chip{
      display:inline-flex; align-items:center; gap:.45rem;
      padding:.38rem .7rem;
      border-radius:999px;
      border:1px solid var(--border);
      background:var(--surface-2);
      color:var(--text);
      font-weight:900;
      font-size:.8rem;
      white-space:nowrap;
    }
    .chip i{color:var(--primary)}
    .logo{
      width:54px; height:54px;
      border-radius: 16px;
      border:1px solid var(--border);
      background:var(--surface-2);
      display:grid; place-items:center;
      flex:0 0 auto;
      overflow:hidden;
    }
    .logo img{width:34px; height:34px; object-fit:contain;}
    .cardx-body{padding: 0 1rem 1rem;}

    .title{
      font-weight: 950;
      letter-spacing:-.01em;
      margin: .35rem 0 .25rem;
      font-size: 1.02rem;
      line-height:1.25;
      min-height: 2.4em;
      display:-webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow:hidden;
    }
    .meta{
      display:flex; flex-wrap:wrap; gap:.5rem;
      color:var(--muted);
      font-size:.88rem;
      margin-bottom: .65rem;
      align-items:center;
    }
    .meta .dot{width:4px;height:4px;border-radius:999px;background:#cbd5e1}
    .price-row{
      display:flex; align-items:flex-end; justify-content:space-between;
      gap:.75rem;
      padding:.75rem 0 .2rem;
      border-top:1px dashed #e5e7eb;
    }
    .price{
      font-weight: 1000;
      font-size: 1.15rem;
      letter-spacing:-.02em;
      color: var(--primary);
      line-height:1.1;
    }
    .price-sub{color:var(--muted);font-size:.86rem;font-weight:700}
    .actions{display:flex; gap:.55rem; margin-top:.85rem;}
    .btnx{
      flex:1;
      border-radius: 14px;
      padding:.72rem .9rem;
      font-weight:900;
      border:1px solid var(--border);
      background:var(--surface);
      transition:.2s ease;
      display:inline-flex;
      justify-content:center;
      align-items:center;
      gap:.45rem;
      text-decoration:none;
      user-select:none;
    }
    .btnx:hover{transform:translateY(-1px); box-shadow: 0 10px 18px rgba(15,23,42,.08)}
    .btnx-primary{border:none;background: var(--primary);color:#fff;}
    .btnx-primary:hover{background: var(--primary-2)}
    .badge-count{
      position:absolute;
      top:.9rem; right:.9rem;
      background:#fff;
      border:1px solid var(--border);
      border-radius:999px;
      padding:.35rem .6rem;
      font-weight:950;
      font-size:.8rem;
      color: var(--text);
      box-shadow: 0 10px 18px rgba(15,23,42,.06);
    }

    .loading-box, .empty-box, .error-box{
      background:var(--surface);
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.2rem;
      box-shadow: var(--shadow);
      text-align:center;
      color:var(--muted);
    }
    .spinner{
      width:38px;height:38px;border-radius:999px;
      border:4px solid #e2e8f0;
      border-top-color: var(--primary);
      margin: 0 auto .85rem;
      animation: spin 1s linear infinite;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    .modal-content{
      border-radius: 18px;
      border:1px solid var(--border);
      box-shadow: 0 20px 60px rgba(15,23,42,.14);
    }
    .modal-header{border-bottom:1px solid var(--border);padding: 1.05rem 1.2rem;}
    .modal-title{font-weight: 950;letter-spacing:-.01em;}
    .modal-body{padding: 1.1rem 1.2rem}
    .modal-footer{border-top:1px solid var(--border);padding: .95rem 1.2rem;}

    .group-head{
      display:flex; gap:1rem; align-items:center;
      padding: 1rem;
      border:1px solid var(--border);
      border-radius: 18px;
      background: #fff;
      margin-bottom: 1rem;
    }
    .group-head .ico{
      width:54px;height:54px;border-radius:16px;
      display:grid; place-items:center;
      background: var(--surface-2);
      border:1px solid var(--border);
      color: var(--primary);
      font-size: 1.3rem;
      flex:0 0 auto;
    }
    .group-head h3{
      font-family:'Sora',sans-serif;
      font-weight: 900;
      letter-spacing:-.02em;
      margin:0;
      font-size: 1.18rem;
    }
    .group-head p{margin:.12rem 0 0; color:var(--muted); font-weight:650}

    .variant{
      border:1px solid var(--border);
      border-radius: 18px;
      padding: .95rem;
      background:#fff;
      transition:.2s ease;
      margin-bottom: .9rem;
    }
    .variant:hover{box-shadow: 0 14px 30px rgba(15,23,42,.08);transform: translateY(-2px)}
    .variant-top{display:flex; align-items:flex-start; justify-content:space-between; gap:.75rem;margin-bottom: .55rem;}
    .variant-name{font-weight: 950;margin:0;font-size: 1rem;letter-spacing:-.01em;}
    .variant-tag{
      border:1px solid var(--border);
      background: var(--surface-2);
      border-radius:999px;
      padding:.28rem .55rem;
      font-size:.78rem;
      font-weight: 900;
      color: var(--text);
      white-space:nowrap;
    }
    .variant-desc{margin:0 0 .75rem;color: var(--muted);font-weight:650;font-size: .92rem;}
    .variant-foot{
      display:flex; align-items:center; justify-content:space-between; gap:.75rem; flex-wrap:wrap;
      border-top:1px dashed #e5e7eb;
      padding-top:.75rem;
    }
    .variant-price{
      font-weight: 1000;
      color: var(--primary);
      font-size: 1.15rem;
      letter-spacing:-.02em;
      line-height:1.1;
    }
    .variant-old{
      display:block;
      color:#94a3b8;
      text-decoration: line-through;
      font-weight:800;
      font-size:.86rem;
      margin-top:.1rem;
    }
    .btn-wa{
      border:none;
      background: var(--accent);
      color:#fff;
      border-radius: 14px;
      padding:.72rem 1rem;
      font-weight: 950;
      display:inline-flex;
      align-items:center;
      gap:.55rem;
      text-decoration:none;
      transition:.2s ease;
      white-space:nowrap;
    }
    .btn-wa:hover{transform:translateY(-1px); box-shadow: 0 16px 34px rgba(249,115,22,.25); color:#fff}

    .footnote{text-align:center;color:var(--muted);font-size:.9rem;padding: 1rem 0 2rem;}

    /* POPUP KECIL */
    .welcome-overlay{
      position:fixed;
      inset:0;
      background:rgba(15,23,42,.25);
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding:4.5rem 1rem 1rem;
      z-index:1050;
    }
    .welcome-card{
      max-width:340px;
      width:100%;
      background:#ffffff;
      border-radius:18px;
      border:1px solid var(--border);
      box-shadow:0 18px 40px rgba(15,23,42,.18);
      padding:1rem 1.05rem 0.9rem;
      animation:popin .25s ease-out;
    }
    .welcome-title{
      display:flex;
      align-items:center;
      gap:.55rem;
      font-weight:900;
      font-size:.98rem;
      margin-bottom:.25rem;
    }
    .welcome-title span{
      font-family:'Sora',sans-serif;
      letter-spacing:-.01em;
    }
    .welcome-body{
      font-size:.9rem;
      color:var(--muted);
      margin-bottom:.65rem;
    }
    .welcome-body b{color:#0f172a}
    .welcome-actions{
      display:flex;
      justify-content:flex-end;
    }
    .btn-gotit{
      border:none;
      background:var(--primary);
      color:#fff;
      border-radius:999px;
      padding:.42rem .85rem;
      font-size:.86rem;
      font-weight:900;
      display:inline-flex;
      align-items:center;
      gap:.35rem;
    }
    .welcome-close{
      position:absolute;
      top:.45rem;
      right:.6rem;
      font-size:.85rem;
      color:#94a3b8;
      cursor:pointer;
    }
    .hidden{display:none !important;}
    @keyframes popin{
      from{transform:translateY(-8px) scale(.96);opacity:0;}
      to{transform:translateY(0) scale(1);opacity:1;}
    }
  </style>
</head>
<body>
  <div class="page-wrap">
    <!-- HERO -->
    <section class="hero">
      <div class="container text-center">
        <div class="pill">
          <i class="fa-solid fa-circle-check"></i> Digital Subscription Catalog
        </div>
        <h1>Katalog Layanan Digital</h1>
        <p>
          Pilih paket langganan aplikasi premium yang paling relevan dengan kebutuhan kerja,
          hiburan, dan produktivitas Anda.
        </p>
      </div>
    </section>

    <!-- TOOLS (SEARCH & FILTER) -->
    <section class="tools">
      <div class="container">
        <div class="tools-card">
          <div class="row g-3 align-items-end">
            <div class="col-md-7">
              <div class="label">Cari layanan / aplikasi premium</div>
              <div class="search-wrap">
                <i class="fa-solid fa-magnifying-glass search-ico"></i>
                <input id="searchInput" class="form-control control search-input" type="text"
                  placeholder="Contoh: Netflix, Canva, YouTube Premium, CapCut, Spotify...">
              </div>
            </div>
            <div class="col-md-5">
              <div class="label">Filter kategori</div>
              <select id="filterKategori" class="form-select control">
                <option value="">Semua Kategori</option>
                <option value="Langganan">Langganan</option>
                <option value="Streaming">Streaming</option>
                <option value="Penyimpanan">Penyimpanan</option>
                <option value="Desain">Desain</option>
                <option value="Produktivitas">Produktivitas</option>
                <option value="AI Tools">AI Tools</option>
                <option value="Keamanan">Keamanan</option>
                <option value="Game">Game</option>
                <option value="Voucher">Voucher</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PRODUK -->
    <section class="section" id="produk">
      <div class="container">
        <div class="section-head">
          <h2 class="section-title">Daftar Produk Digital</h2>
          <p class="section-sub">
            Pilih produk aplikasi premium sesuai kebutuhan Anda. Klik pada produk untuk melihat varian dan detailnya.
            <br><b>Harga yang tertera khusus Reseller</b>
          </p>
        </div>

        <div id="produk-list">
          <div class="loading-box">
            <div class="spinner"></div>
            <div style="font-weight:900;color:#0f172a">Memuat price list...</div>
            <div style="color:#64748b;font-weight:650">Mohon tunggu sebentar</div>
          </div>
        </div>

        <div class="footnote">
          Copyright 2026 <b>D&amp;D Multiverse Digital</b>
        </div>
      </div>
    </section>
  </div>

  <!-- MODAL VARIAN -->
  <div class="modal fade" id="groupModal" tabindex="-1" aria-labelledby="groupModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" style="max-width:720px;">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="groupModalLabel">
            <i class="fa-solid fa-layer-group me-2"></i> Varian Produk
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Tutup"></button>
        </div>
        <div class="modal-body" id="groupModalBody"></div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Tutup</button>
        </div>
      </div>
    </div>
  </div>

  <!-- POPUP WELCOME -->
  <div id="welcomeOverlay" class="welcome-overlay hidden">
    <div class="welcome-card position-relative">
      <div class="welcome-close" id="welcomeClose">
        <i class="fa-solid fa-xmark"></i>
      </div>
      <div class="welcome-title">
        <div class="d-inline-flex align-items-center justify-content-center"
             style="width:26px;height:26px;border-radius:999px;background:#e0edff;color:var(--primary);">
          <i class="fa-solid fa-bolt"></i>
        </div>
        <span>Welcome to D&amp;D Digital</span>
      </div>
      <div class="welcome-body">
        Nikmati akses <b>Netflix, YouTube Premium, Spotify, Canva Pro, CapCut, ChatGPT</b> dan
        banyak layanan digital lain dengan harga reseller. Pilih paket, lihat varian, lalu pesan via WhatsApp.
      </div>
      <div class="welcome-actions">
        <button type="button" id="welcomeGotIt" class="btn-gotit">
          <span>Got it</span>
          <i class="fa-solid fa-check"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const DEFAULT_WA = "6287809236556";

    const categoryIcons = {
      "Langganan": "fa-bell-concierge",
      "Streaming": "fa-tv",
      "Penyimpanan": "fa-database",
      "Software": "fa-puzzle-piece",
      "Desain": "fa-palette",
      "Produktivitas": "fa-list-check",
      "AI Tools": "fa-robot",
      "Keamanan": "fa-shield-halved",
      "Game": "fa-gamepad",
      "Voucher": "fa-gift"
    };

    function formatRp(num){
      return "Rp" + Number(num || 0).toLocaleString('id-ID');
    }

    function escapeHtml(str){
      return String(str || "")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function makeWAUrl(message, waDefault=DEFAULT_WA){
      return `https://wa.me/${encodeURIComponent(waDefault)}?text=${encodeURIComponent(message)}`;
    }

    const PRODUCT_GROUPS = [
      {
        name: "YouTube Premium",
        category: "Langganan",
        icon: "https://www.logo.wine/a/logo/YouTube/YouTube-Logo.wine.svg",
        variants: [
          {
            name: "YouTube Premium Family 1 Bulan",
            price: 9000,
            oldPrice: 49000,
            tag: "Harga Reseller",
            desc: [
              "Akses akun utama + anggota keluarga",
              "Tanpa iklan di semua device",
              "Bisa download & background play"
            ]
          },
          {
            name: "YouTube Premium Family 2 Bulan",
            price: 17000,
            oldPrice: 98000,
            tag: "Harga Reseller",
            desc: [
              "Masa aktif 2 bulan",
              "Garansi full selama masa langganan",
              "Support semua device yang didukung YouTube"
            ]
          }
        ]
      },
      {
        name: "Apple Music Individual 1 Bulan",
        category: "Langganan",
        icon: "https://upload.wikimedia.org/wikipedia/commons/d/d9/ITunes_12.2_logo.png",
        variants: [
          {
            name: "Apple Music Individual 1 Bulan",
            price: 10000,
            oldPrice: 49999,
            tag: "Harga Reseller",
            desc: [
              "Full akses katalog Apple Music",
              "Support iOS, Android, dan desktop",
              "Kualitas audio tinggi"
            ]
          }
        ]
      },
      {
        name: "Netflix Premium",
        category: "Streaming",
        icon: "https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg",
        variants: [
          {
            name: "Netflix Premium 1 Bulan",
            price: 21000,
            oldPrice: 120000,
            tag: "Harga Reseller",
            desc: [
              "Resolusi sampai 4K (sesuai device)",
              "Profil sharing sesuai ketentuan paket",
              "Banyak pilihan film & series"
            ]
          },
          {
            name: "Netflix Premium 1 Bulan Slot",
            price: 15000,
            oldPrice: 70000,
            tag: "Harga Reseller",
            desc: [
              "Sistem slot di akun premium",
              "1 slot 1 profile",
              "Cocok untuk pemakaian pribadi"
            ]
          }
        ]
      },
      {
        name: "Canva Premium",
        category: "Desain",
        icon: "https://upload.wikimedia.org/wikipedia/commons/3/3b/Canva_Logo.png",
        variants: [
          {
            name: "Canva Pro 1 Bulan",
            price: 3000,
            oldPrice: 95000,
            tag: "Harga Reseller",
            desc: [
              "Akses semua template dan asset Pro",
              "Cocok untuk jualan & konten harian",
              "Bisa di HP dan laptop"
            ]
          },
          {
            name: "Canva Pro 1 Tahun",
            price: 18000,
            oldPrice: 500000,
            tag: "Harga Reseller",
            desc: [
              "Masa aktif 12 bulan",
              "Free update fitur terbaru",
              "Garansi sesuai masa langganan"
            ]
          }
        ]
      },
      {
        name: "CapCut Premium",
        category: "Desain",
        icon: "https://seeklogo.com/images/C/capcut-logo-8E50AB6A4F-seeklogo.com.png",
        variants: [
          {
            name: "CapCut Pro 1 Bulan",
            price: 7000,
            oldPrice: 95000,
            tag: "Harga Reseller",
            desc: [
              "Hilangkan watermark CapCut",
              "Buka semua efek & template Pro",
              "Cocok untuk konten kreator"
            ]
          },
          {
            name: "CapCut Pro 3 Bulan",
            price: 18000,
            oldPrice: 285000,
            tag: "Harga Reseller",
            desc: [
              "Masa aktif 3 bulan",
              "Garansi penuh selama masa aktif",
              "Bisa di Android / iOS"
            ]
          }
        ]
      },
      {
        name: "ChatGPT Premium",
        category: "AI Tools",
        icon: "https://seeklogo.com/images/C/chatgpt-logo-02AFA704B5-seeklogo.com.png",
        variants: [
          {
            name: "ChatGPT Plus 1 Bulan",
            price: 12000,
            oldPrice: 350000,
            tag: "Harga Reseller",
            desc: [
              "Akses GPT canggih untuk kerja & belajar",
              "Cocok untuk copywriting, ide, dan skripsi",
              "Garansi login selama masa aktif"
            ]
          },
          {
            name: "ChatGPT Team Slot",
            price: 9500,
            oldPrice: 280000,
            tag: "Harga Reseller",
            desc: [
              "Sistem slot di akun Team",
              "Performa cepat & stabil",
              "Support multi device"
            ]
          }
        ]
      },
      {
        name: "WeTV Private 1 Bulan",
        category: "Streaming",
        icon: "https://upload.wikimedia.org/wikipedia/commons/1/1a/WeTV_logo.png",
        variants: [
          {
            name: "WeTV Private 1 Bulan",
            price: 28000,
            oldPrice: 59000,
            tag: "Harga Normal",
            desc: [
              "Akses akun private 1 bulan",
              "Banyak drama Asia & film",
              "Login di beberapa device"
            ]
          }
        ]
      },
      {
        name: "VIU Premium 1 Bulan",
        category: "Streaming",
        icon: "https://upload.wikimedia.org/wikipedia/commons/6/6e/Viu_logo.png",
        variants: [
          {
            name: "VIU Premium 1 Bulan",
            price: 6000,
            oldPrice: 45000,
            tag: "Harga Reseller",
            desc: [
              "Semua konten premium terbuka",
              "Tanpa iklan yang ganggu",
              "Support Android, iOS, dan web"
            ]
          }
        ]
      },
      {
        name: "Google One + Drive 2TB",
        category: "Penyimpanan",
        icon: "https://upload.wikimedia.org/wikipedia/commons/5/5f/Google_One_logo.png",
        variants: [
          {
            name: "Google One 2TB + Gmail Pro 1 Tahun",
            price: 20000,
            oldPrice: 899000,
            tag: "Harga Reseller",
            desc: [
              "Kapasitas 2TB untuk Drive, Gmail, Photos",
              "Cocok untuk backup kerja & bisnis",
              "Bisa share family group (sesuai paket)"
            ]
          }
        ]
      }
    ];

    PRODUCT_GROUPS.forEach((g, i) => g.id = i);

    const produkList = document.getElementById("produk-list");
    const searchInput = document.getElementById("searchInput");
    const filterKategori = document.getElementById("filterKategori");

    function showLoading(){
      produkList.innerHTML = `
        <div class="loading-box">
          <div class="spinner"></div>
          <div style="font-weight:900;color:#0f172a">Memuat price list...</div>
          <div style="color:#64748b;font-weight:650">Mohon tunggu sebentar</div>
        </div>`;
    }

    function showEmpty(){
      produkList.innerHTML = `
        <div class="empty-box">
          <div style="font-size:1.2rem;margin-bottom:.35rem;color:#0f172a;font-weight:950">
            <i class="fa-solid fa-magnifying-glass me-2"></i>Produk tidak ditemukan
          </div>
          <div>Coba ubah kata kunci pencarian atau pilih kategori lain.</div>
        </div>`;
    }

    function getFilteredGroups(query, kategori){
      const q = (query || "").toLowerCase();
      return PRODUCT_GROUPS.filter(g => {
        const matchCat = !kategori || g.category === kategori;
        const inName = g.name.toLowerCase().includes(q);
        const inVariant = g.variants.some(v => v.name.toLowerCase().includes(q));
        return matchCat && (!q || inName || inVariant);
      });
    }

    function renderGroups(){
      showLoading();
      const q = searchInput.value;
      const cat = filterKategori.value;

      setTimeout(() => {
        const groups = getFilteredGroups(q, cat);
        if (!groups.length){
          showEmpty();
          return;
        }

        let html = `<div class="grid">`;

        groups.forEach(g => {
          const prices = g.variants.map(v => v.price);
          const minP = Math.min(...prices);
          const maxP = Math.max(...prices);
          const priceText = (minP === maxP)
            ? formatRp(minP)
            : `${formatRp(minP)} – ${formatRp(maxP)}`;

          const catIcon = categoryIcons[g.category] || "fa-box";
          const count = g.variants.length;
          const subText = count > 1 ? `${count} varian tersedia` : `1 varian`;

          html += `
            <div class="grid-item">
              <div class="cardx" onclick="openGroup(${g.id})">
                <div class="badge-count">
                  <i class="fa-solid fa-cube me-1"></i>${count}
                </div>
                <div class="cardx-head">
                  <div class="d-flex align-items-center gap-3">
                    <div class="logo">
                      <img src="${g.icon || ''}" alt="${escapeHtml(g.name)}"
                        onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHJ4PSIxNiIgZmlsbD0iI2Y4ZmFmYyIvPjxyZWN0IHg9IjgiIHk9IjgiIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgcng9IjE0IiBmaWxsPSIjZmZmIiBzdHJva2U9IiNlMmU4ZjAiLz48cGF0aCBkPSJNMjQgMzMuNWg2VjI0aDQuNVYzMy41SDQ0djRoLTkuNVY0Nmg0djQuNUgzMHYtNC41aDRWMy43NUgyNHY5LjVINTR2NGgtMzB2Ny41WiIgZmlsbD0iIzFkNGVkOCIvPjwvc3ZnPg=='" />
                    </div>
                    <div>
                      <div class="chip">
                        <i class="fa-solid ${catIcon}"></i>${escapeHtml(g.category || "Umum")}
                      </div>
                      <div class="title">${escapeHtml(g.name)}</div>
                      <div class="meta">
                        <span><i class="fa-solid fa-bolt me-1" style="color:var(--primary)"></i>Aplikasi Premium</span>
                        <span class="dot"></span>
                        <span><i class="fa-solid fa-cube me-1"></i>${subText}</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="cardx-body">
                  <div class="price-row">
                    <div>
                      <div class="price">${priceText}</div>
                      <div class="price-sub">Klik untuk lihat varian &amp; detail</div>
                    </div>
                  </div>
                  <div class="actions">
                    <div class="btnx btnx-primary" onclick="openGroup(${g.id});event.stopPropagation();">
                      <i class="fa-solid fa-circle-info"></i> Lihat Varian
                    </div>
                  </div>
                </div>
              </div>
            </div>`;
        });

        html += `</div>`;
        produkList.innerHTML = html;
      }, 50);
    }

    function openGroup(id){
      const g = PRODUCT_GROUPS.find(x => x.id === id);
      if (!g) return;

      const catIcon = categoryIcons[g.category] || "fa-box";

      let body = `
        <div class="group-head">
          <div class="ico"><i class="fa-solid ${catIcon}"></i></div>
          <div style="flex:1;">
            <h3>${escapeHtml(g.name)}</h3>
            <p>${escapeHtml(g.category || "Umum")} • ${g.variants.length} varian • Layanan Digital Aplikasi Premium</p>
          </div>
        </div>`;

      g.variants.forEach(item => {
        const desc = (item.desc && item.desc.length)
          ? item.desc.map(d => "• " + escapeHtml(d)).join("<br>")
          : `<em class="text-muted">Deskripsi belum diisi</em>`;

        const pesanText = `Halo admin, saya ingin pesan ${item.name} (${formatRp(item.price)}).`;
        const pesanUrl = makeWAUrl(pesanText, item.wa || DEFAULT_WA);
        const isReseller = (item.tag || "").toLowerCase().includes("reseller");

        body += `
          <div class="variant">
            <div class="variant-top">
              <div>
                <p class="variant-name">${escapeHtml(item.name)}</p>
                <div class="variant-desc">${desc}</div>
              </div>
              <div class="variant-tag">
                ${isReseller
                  ? '<i class="fa-solid fa-star me-1" style="color:var(--success)"></i>' + escapeHtml(item.tag || 'Harga Reseller')
                  : '<i class="fa-solid fa-tag me-1" style="color:var(--primary)"></i>' + escapeHtml(item.tag || 'Harga Normal')}
              </div>
            </div>
            <div class="variant-foot">
              <div>
                <div class="variant-price">${formatRp(item.price)}</div>
                ${item.oldPrice
                  ? `<span class="variant-old">${formatRp(item.oldPrice)}</span>`
                  : ``}
              </div>
              <a class="btn-wa" href="${pesanUrl}" target="_blank" rel="noopener">
                <i class="fa-brands fa-whatsapp"></i> Pesan
              </a>
            </div>
          </div>`;
      });

      document.getElementById("groupModalLabel").innerHTML =
        `<i class="fa-solid fa-layer-group me-2"></i> ${escapeHtml(g.name)}`;
      document.getElementById("groupModalBody").innerHTML = body;

      new bootstrap.Modal(document.getElementById('groupModal')).show();
    }

    // POPUP WELCOME
    function setupWelcomePopup(){
      const overlay = document.getElementById("welcomeOverlay");
      const btnGotIt = document.getElementById("welcomeGotIt");
      const btnClose = document.getElementById("welcomeClose");
      const KEY = "dd_digital_welcome_v1";

      function hide(){
        overlay.classList.add("hidden");
      }
      function show(){
        overlay.classList.remove("hidden");
      }

      if (!localStorage.getItem(KEY)){
        show();
      }

      btnGotIt.addEventListener("click", () => {
        localStorage.setItem(KEY, "1");
        hide();
      });
      btnClose.addEventListener("click", () => {
        localStorage.setItem(KEY, "1");
        hide();
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      renderGroups();
      setupWelcomePopup();

      searchInput.addEventListener("input", renderGroups);
      filterKategori.addEventListener("change", renderGroups);
    });
  </script>
</body>
</html>

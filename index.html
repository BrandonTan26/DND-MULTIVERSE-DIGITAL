<!DOCTYPE html>
<html lang="id" data-theme="dark" style="--nav-h: 59px;">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>D&D Multiverse Digital - Price List</title>

  <!-- Bootstrap & Fonts -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Tema luar angkasa + neon cyberpunk */
      --primary-color:#22d3ee; /* cyan neon */
      --secondary-color:#6366f1; /* indigo neon */
      --accent-color:#f97316; /* orange accent */
      --success-color:#10b981;
      --warning-color:#f59e0b;
      --danger-color:#ef4444;

      --dark-color:#020617;
      --light-color:#0b1020;
      --muted-color:#64748b;

      --bg-page:
        radial-gradient(circle at 0% 0%, rgba(56,189,248,0.20), transparent 55%),
        radial-gradient(circle at 100% 0%, rgba(129,140,248,0.20), transparent 55%),
        radial-gradient(circle at 0% 100%, rgba(248,113,113,0.18), transparent 55%),
        #020617;

      --bg-surface:#020617;
      --text-main:#e5e7eb;

      --card-shadow:0 8px 24px rgba(0,0,0,.8);
      --card-shadow-hover:0 18px 40px rgba(0,0,0,.95);

      --border-radius:16px;

      --gradient-primary:linear-gradient(135deg,#22d3ee 0%,#6366f1 45%,#f97316 100%);
      --gradient-accent:linear-gradient(135deg,#22c55e 0%,#22d3ee 100%);

      /* dinamis (diisi via JS) */
      --nav-h:64px;
    }

    html[data-theme="light"]{
      --bg-page:
        radial-gradient(circle at 0% 0%, rgba(56,189,248,0.10), transparent 55%),
        radial-gradient(circle at 100% 0%, rgba(129,140,248,0.12), transparent 55%),
        radial-gradient(circle at 0% 100%, rgba(248,113,113,0.10), transparent 55%),
        #ffffff;

      --bg-surface:#f8fafc;
      --text-main:#0f172a;
      --light-color:#f1f5f9;
      --muted-color:#64748b;

      --card-shadow:0 4px 6px -1px rgba(15,23,42,.12),0 2px 4px -1px rgba(15,23,42,.08);
      --card-shadow-hover:0 20px 25px -5px rgba(15,23,42,.20),0 10px 10px -5px rgba(15,23,42,.12);
    }

    *{box-sizing:border-box}
    body{
      font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;
      background:var(--bg-page);
      min-height:100vh;
      line-height:1.6;
      color:var(--text-main);
    }
    .container-fluid{
      background:transparent;
      min-height:100vh;
      margin:0;
      padding:0;
    }

    /* ===== Glass Navbar ===== */
    .nav-glass{
      position:sticky;
      top:0;
      z-index:1100;
      background:rgba(15,23,42,.86);
      backdrop-filter:saturate(1.6) blur(16px);
      border-bottom:1px solid rgba(148,163,184,.35);
    }
    html[data-theme="light"] .nav-glass{
      background:rgba(248,250,252,.92);
      border-color:#e2e8f0;
    }
    .navbar-brand{
      font-weight:900;
      letter-spacing:.5px;
      background:var(--gradient-primary);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      text-transform:uppercase;
      font-size:1.05rem;
    }
    .nav-link{
      font-weight:700;
      border-radius:999px;
      padding:.45rem .9rem !important;
    }
    html[data-theme="light"] .nav-link{
      color:#0f172a !important;
    }
    html[data-theme="dark"] .nav-link{
      color:#e5e7eb !important;
    }
    .nav-link:hover{
      background:rgba(99,102,241,.14);
      color:#ffffff !important;
    }
    .nav-link.active{
      color:#fff !important;
      background:var(--gradient-primary);
    }
    .navbar-toggler{
      border-radius:12px;
      border:1px solid #4b5563;
      padding:.25rem .4rem;
      color:inherit;
      background:rgba(15,23,42,.6);
    }
    html[data-theme="light"] .navbar-toggler{
      border-color:#cbd5e1;
      background:rgba(255,255,255,.8);
    }
    .navbar-toggler:focus{ box-shadow:none; }

    .nav-icon-btn{
      width:42px;
      height:42px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border-radius:12px;
      border:2px solid rgba(148,163,184,.45);
      background:rgba(15,23,42,.85);
      color:#e5e7eb;
    }
    html[data-theme="light"] .nav-icon-btn{
      background:#ffffff;
      border-color:#e2e8f0;
      color:#0f172a;
    }
    .nav-cart-count{
      position:absolute;
      top:-6px;
      right:-6px;
      min-width:20px;
      height:20px;
      border-radius:999px;
      background:#10b981;
      color:#fff;
      font-size:.75rem;
      font-weight:900;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .navbar-toggler-icon{
      width:1.8rem;
      height:1.8rem;
      background-repeat:no-repeat;
      background-position:center;
      background-size:100%;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath stroke='%23ffffff' stroke-width='2' stroke-linecap='round' d='M4 6h16M4 12h16M4 18h16'/%3E%3C/svg%3E");
    }
    html[data-theme='light'] .navbar-toggler-icon{
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath stroke='%230f172a' stroke-width='2' stroke-linecap='round' d='M4 6h16M4 12h16M4 18h16'/%3E%3C/svg%3E");
    }

    html[data-theme="dark"] .offcanvas,
    html[data-theme="dark"] .dropdown-menu{
      background:#020617;
      color:#e5e7eb;
      border-color:#1f2937;
    }
    html[data-theme="dark"] .dropdown-item{
      color:#e5e7eb;
    }
    html[data-theme="dark"] .dropdown-item:hover{
      color:#fff;
      background:rgba(99,102,241,.22);
    }

    .topbar{
      position:sticky;
      top:var(--nav-h);
      z-index:1000;
      background:#fff0;
      border-bottom:1px solid #e2e8f0;
      backdrop-filter:saturate(1.1) blur(6px);
    }
    html[data-theme="dark"] .topbar{
      background:#0f172acc;
      border-color:#1f2937;
    }

    .search-section{padding:1rem 0}
    .search-input,.sort-select{
      border:2px solid #1f2937;
      border-radius:12px;
      padding:.75rem 1rem;
      font-size:1rem;
      transition:.3s;
      background:#020617;
      color:#e5e7eb;
    }
    html[data-theme="light"] .search-input,
    html[data-theme="light"] .sort-select{
      background:#ffffff;
      border-color:#e2e8f0;
      color:#0f172a;
    }
    .input-group-custom{position:relative}
    .input-icon{
      position:absolute;
      left:1rem;
      top:50%;
      transform:translateY(-50%);
      color:#64748b;
      z-index:10;
    }
    .search-input{padding-left:3rem}
    main{scroll-margin-top:calc(var(--nav-h) + 16px);}

    .products-section{
      padding:2rem 0 1.5rem;
      background:radial-gradient(circle at top,rgba(15,23,42,.9),rgba(15,23,42,1));
    }
    html[data-theme="light"] .products-section{
      background:#f8fafc;
    }
    .section-title{
      font-size:2rem;
      font-weight:700;
      color:var(--text-main);
      margin-bottom:.25rem;
      text-align:center;
    }
    .section-subtitle{
      color:var(--muted-color);
      font-size:1rem;
      text-align:center;
      margin-bottom:1.25rem;
    }

    .product-card{
      background:radial-gradient(circle at top left,rgba(56,189,248,.12),transparent 55%),var(--bg-surface);
      border-radius:var(--border-radius);
      box-shadow:var(--card-shadow);
      transition:all .4s cubic-bezier(.25,.8,.25,1);
      border:1px solid rgba(148,163,184,.55);
      overflow:hidden;
      height:100%;
      position:relative;
    }
    html[data-theme="light"] .product-card{
      background:#ffffff;
      border-color:#e2e8f0;
      box-shadow:0 10px 30px rgba(148,163,184,.35);
    }
    .product-card:hover{
      transform:translateY(-6px);
      box-shadow:var(--card-shadow-hover);
    }
    .product-card::before{
      content:"";
      position:absolute;
      top:0;
      left:0;
      right:0;
      height:4px;
      background:var(--gradient-primary);
      transform:scaleX(0);
      transform-origin:left;
      transition:transform .3s;
    }
    .product-card:hover::before{transform:scaleX(1);}

    a.quick-wa{
      text-decoration:none !important;
      color:inherit;
    }
    a.quick-wa:hover,
    a.quick-wa:focus{
      text-decoration:none !important;
    }

    .product-icon{
      width:64px;
      height:64px;
      margin:0 auto 1rem;
      display:flex;
      align-items:center;
      justify-content:center;
      background:#ffffff;
      border-radius:16px;
      transition:.3s;
      border:1px solid #e2e8f0;
    }
    html[data-theme="dark"] .product-icon{
      background:rgba(15,23,42,1);
      border-color:#1f2937;
    }
    .product-card:hover .product-icon{
      background:var(--gradient-primary);
      transform:scale(1.06);
      border-color:transparent;
    }
    .product-icon img{
      width:40px;
      height:40px;
      object-fit:contain;
      filter:none;
      transition:filter .3s;
    }
    .product-card:hover .product-icon img{
      filter:brightness(0) invert(1);
    }

    .product-title{
      font-size:1rem;
      font-weight:700;
      color:var(--text-main);
      margin-bottom:.35rem;
      line-height:1.35;
      min-height:2.6em;
    }
    .price-wrap{margin-bottom:.6rem}
    .price{
      font-size:1.1rem;
      font-weight:800;
      color:var(--success-color);
      margin-right:.5rem;
    }
    .price-old{
      font-size:.95rem;
      color:#9ca3af;
      text-decoration:line-through;
    }

    .category-badge{
      position:absolute;
      top:1rem;
      right:1rem;
      background:var(--gradient-primary);
      color:#fff;
      padding:.25rem .5rem;
      border-radius:6px;
      font-size:.75rem;
      font-weight:800;
      display:inline-flex;
      align-items:center;
      gap:.35rem;
    }

    .product-actions{
      gap:.5rem;
      justify-content:center;
    }
    .icon-btn{
      width:42px;
      height:42px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border-radius:12px;
      border:2px solid rgba(148,163,184,.45);
      background:rgba(15,23,42,.9);
      transition:.2s;
      color:#e5e7eb;
    }
    html[data-theme="light"] .icon-btn{
      background:#f8fafc;
      border-color:#e2e8f0;
      color:#0f172a;
    }
    .icon-btn i{font-size:1.05rem}
    .icon-btn:disabled{opacity:.6;cursor:not-allowed}
    .icon-btn:hover{transform:translateY(-1px)}

    .btn-add.icon-btn{
      border-color:#22d3ee;
      background:rgba(34,211,238,.12);
      color:#e0f2fe;
    }
    html[data-theme="light"] .btn-add.icon-btn{
      background:#e0f2fe;
      border-color:#bfdbfe;
      color:#1d4ed8;
    }
    .quick-wa.icon-btn{
      border-color:#22c55e;
      background:rgba(22,163,74,.12);
    }
    .quick-wa.icon-btn i{color:#22c55e}
    html[data-theme="light"] .quick-wa.icon-btn{
      background:#dcfce7;
      border-color:#bbf7d0;
    }

    .wishlist-btn{
      position:absolute;
      top:.6rem;
      left:.6rem;
      background:#020617e6;
      border:1px solid #1f2937;
      border-radius:50%;
      width:38px;
      height:38px;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      z-index:2;
    }
    html[data-theme="light"] .wishlist-btn{
      background:#ffffffcc;
      border-color:#e2e8f0;
    }
    .wishlist-btn i{color:#94a3b8}
    .wishlist-btn.active i{color:#ef4444}

    .modal-content{
      border-radius:var(--border-radius);
      border:none;
      box-shadow:0 25px 50px -12px rgba(0,0,0,.55);
      background:var(--bg-surface);
      color:var(--text-main);
    }
    .modal-header{
      background:var(--gradient-primary);
      color:#fff;
      border-radius:var(--border-radius) var(--border-radius) 0 0;
      padding:1.1rem;
    }
    .btn-close{filter:brightness(0) invert(1)}
    .modal-body{
      padding:1rem;
      color:var(--text-main);
    }
    .modal-footer{
      padding:1rem;
      border-top:1px solid #1f2937;
    }

    .modal-product-main{
      border-radius:18px;
      padding:.65rem .75rem;
      background:linear-gradient(135deg,rgba(34,211,238,.12),rgba(99,102,241,.16));
    }
    html[data-theme="light"] .modal-product-main{
      background:linear-gradient(135deg,rgba(191,219,254,.6),rgba(236,252,203,.5));
    }
    .modal-product-icon{
      width:80px;
      height:80px;
    }
    .modal-category-pill{
      background:linear-gradient(135deg,#22d3ee,#6366f1);
      color:#fff;
      border-radius:999px;
      padding:.2rem .65rem;
      font-size:.75rem;
      font-weight:600;
      box-shadow:0 8px 20px rgba(15,23,42,.85);
    }
    .modal-product-title{
      font-weight:800;
      font-size:1.05rem;
    }
    .modal-product-subtitle{
      font-size:.9rem;
      color:var(--muted-color);
    }
    .modal-product-prices .modal-price-main{
      font-size:1.1rem;
      font-weight:800;
      color:var(--success-color);
    }
    .modal-product-prices .modal-price-old{
      font-size:.9rem;
      text-decoration:line-through;
      color:#9ca3af;
    }

    .modal-variant-list{margin-top:.35rem;}
    .variant-card{
      border-radius:14px;
      padding:.7rem .8rem;
      border:1px solid #1f2937;
      background:#020617;
    }
    .variant-card:hover{
      border-color:#4f46e5;
      box-shadow:0 18px 40px rgba(0,0,0,.95);
    }
    html[data-theme="light"] .variant-card{
      background:#f9fafb;
      border-color:#e5e7eb;
    }
    html[data-theme="light"] .variant-card:hover{
      border-color:#a5b4fc;
      box-shadow:0 8px 22px rgba(148,163,184,.45);
    }
    .variant-card-title{font-size:.95rem;}
    .variant-card-label{font-size:.78rem;}
    .variant-card-price{
      font-size:.95rem;
      color:var(--success-color);
    }
    .variant-card-price-old{
      font-size:.78rem;
      text-decoration:line-through;
      color:#9ca3af;
    }
    .variant-features{margin:0 0 .4rem 0;padding:0;}
    .variant-feature-item{
      display:flex;
      align-items:flex-start;
      gap:.35rem;
      font-size:.85rem;
      margin-bottom:.15rem;
    }
    .variant-feature-icon{
      margin-top:.10rem;
      font-size:.8rem;
      color:#22c55e;
    }

    .fade-in{animation:fadeIn .6s ease-out forwards}
    @keyframes fadeIn{
      from{opacity:0;transform:translateY(20px)}
      to{opacity:1;transform:translateY(0)}
    }
    .empty-state{
      text-align:center;
      padding:3rem;
      color:var(--muted-color);
    }
    .empty-state i{
      font-size:3rem;
      margin-bottom:1rem;
      opacity:.5;
    }
    .loading{
      display:flex;
      justify-content:center;
      align-items:center;
      height:200px;
    }
    .spinner{
      width:40px;
      height:40px;
      border:4px solid #1f2937;
      border-top:4px solid var(--primary-color);
      border-radius:50%;
      animation:spin 1s linear infinite;
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    .btn:focus,.form-control:focus,.form-select:focus{
      outline:2px solid var(--primary-color);
      outline-offset:2px;
      box-shadow:none;
    }

    .modal{ z-index:1200; }
    .modal-dialog{ margin:0.75rem auto; }

    .offcanvas{ z-index:1200; margin:0.75rem auto; }

    @supports (padding: max(0px)) {
      .modal{
        padding-top: max(env(safe-area-inset-top, 0px), calc(var(--nav-h) + 10px));
        padding-left: max(8px, env(safe-area-inset-left, 0px));
        padding-right: max(8px, env(safe-area-inset-right, 0px));
        padding-bottom: max(8px, env(safe-area-inset-bottom, 0px));
      }
    }

    @media (max-width: 576px){
      .modal-dialog{ margin:0; }
      .modal-content{ border-radius:16px; }
      .modal-header{
        position: sticky;
        top: 0;
        z-index: 1;
        background: var(--gradient-primary);
        color:#fff;
      }
      .btn-close{ filter:brightness(0) invert(1); }
    }

    @media (max-width:576px){
      #produk-list .col-6{flex:0 0 50%;max-width:50%}
    }

    .floating-cart{
      position:fixed;
      right:16px;
      bottom:16px;
      z-index:900;
      background:var(--gradient-primary);
      border:none;
      color:#fff;
      border-radius:999px;
      padding:.9rem 1.1rem;
      box-shadow:0 18px 45px rgba(0,0,0,.85);
      display:flex;
      align-items:center;
      gap:.6rem;
      font-weight:900;
    }
    .floating-cart .count{
      background:#fff;
      color:#1f2937;
      font-weight:900;
      padding:.1rem .5rem;
      border-radius:999px;
      min-width:28px;
      text-align:center;
    }

    .floating-dark{
      position:fixed;
      left:16px;
      bottom:16px;
      z-index:900;
      border:2px solid #1f2937;
      background:#020617;
      border-radius:999px;
      width:48px;
      height:48px;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 18px 45px rgba(0,0,0,.85);
      color:#e5e7eb;
    }
    html[data-theme="light"] .floating-dark{
      background:#ffffff;
      border-color:#e5e8f0;
      color:#020617;
    }

    .load-more-wrap{text-align:center;margin-top:1rem}

    @media (max-width: 576px) {
      #produkModal .modal-footer{
        display:flex;
        flex-wrap:nowrap;
        gap:.5rem;
        justify-content:space-between;
      }
      #produkModal .modal-footer .btn{
        flex:1 1 0;
        min-width:0;
        white-space:nowrap;
      }
    }
    @media (max-width: 400px){
      #produkModal .modal-footer .btn i { margin-right:0; }
      #produkModal .modal-footer .btn span { display:none; }
    }

    /* ========== HERO SECTION ========== */
    .hero-section{
      padding:2.75rem 0 2.25rem;
      background:
        radial-gradient(circle at top left,rgba(56,189,248,.26),transparent 55%),
        radial-gradient(circle at bottom right,rgba(129,140,248,.22),transparent 55%);
      border-bottom:1px solid rgba(148,163,184,.35);
    }
    html[data-theme="light"] .hero-section{
      background:
        radial-gradient(circle at top left,rgba(191,219,254,.7),transparent 55%),
        radial-gradient(circle at bottom right,rgba(254,215,170,.7),transparent 55%);
      border-color:#e2e8f0;
    }
    .hero-badge{
      display:inline-flex;
      align-items:center;
      gap:.4rem;
      padding:.3rem .75rem;
      border-radius:999px;
      background:rgba(15,23,42,.75);
      border:1px solid rgba(148,163,184,.7);
      font-size:.78rem;
      font-weight:600;
      color:#e5e7eb;
    }
    html[data-theme="light"] .hero-badge{
      background:rgba(255,255,255,.9);
      color:#0f172a;
    }
    .hero-title{
      font-size:2.25rem;
      font-weight:800;
      margin:.75rem 0 .4rem;
      letter-spacing:.03em;
    }
    @media(min-width:768px){
      .hero-title{font-size:2.6rem;}
    }
    .hero-subtitle{
      max-width:34rem;
      font-size:.98rem;
      color:var(--muted-color);
    }
    .hero-actions{
      margin-top:1.2rem;
      display:flex;
      flex-wrap:wrap;
      gap:.75rem;
    }
    .hero-pill{
      display:inline-flex;
      align-items:center;
      gap:.35rem;
      font-size:.8rem;
      color:var(--muted-color);
    }
    .hero-stat-card{
      border-radius:16px;
      padding:.9rem 1rem;
      background:#020617;
      border:1px solid #1f2937;
      text-align:left;
    }
    html[data-theme="light"] .hero-stat-card{
      background:#f9fafb;
      border-color:#e5e7eb;
    }
    .hero-stat-value{
      font-weight:800;
      font-size:1.1rem;
    }
    .hero-stat-label{
      font-size:.8rem;
      color:var(--muted-color);
    }

    /* KEUNGGULAN */
    .benefit-section{
      padding:2.5rem 0 1.5rem;
      background:radial-gradient(circle at bottom,rgba(15,23,42,.85),rgba(15,23,42,1));
      border-top:1px solid #1f2937;
    }
    html[data-theme="light"] .benefit-section{
      background:#ffffff;
      border-color:#e2e8f0;
    }
    .benefit-card{
      border-radius:18px;
      padding:1.1rem 1.1rem;
      background:#020617;
      border:1px solid #1f2937;
      height:100%;
      box-shadow:0 18px 45px rgba(0,0,0,.85);
    }
    html[data-theme="light"] .benefit-card{
      background:#f9fafb;
      border-color:#e2e8f0;
      box-shadow:0 10px 30px rgba(148,163,184,.3);
    }
    .benefit-icon-wrap{
      width:40px;
      height:40px;
      border-radius:999px;
      display:flex;
      align-items:center;
      justify-content:center;
      background:rgba(56,189,248,.18);
      color:#e0f2fe;
      margin-bottom:.65rem;
    }
    html[data-theme="light"] .benefit-icon-wrap{
      background:rgba(129,140,248,.15);
      color:#4f46e5;
    }
    .benefit-title{
      font-weight:700;
      font-size:.98rem;
      margin-bottom:.25rem;
    }
    .benefit-text{
      font-size:.88rem;
      color:var(--muted-color);
    }

    /* CARA ORDER */
    .steps-section{
      padding:2.25rem 0 1.75rem;
      background:#020617;
    }
    html[data-theme="light"] .steps-section{
      background:#f1f5f9;
    }
    .step-item{
      display:flex;
      gap:.75rem;
      align-items:flex-start;
    }
    .step-badge{
      flex-shrink:0;
      width:30px;
      height:30px;
      border-radius:999px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      font-size:.82rem;
      background:rgba(79,70,229,.32);
      color:#c7d2fe;
    }
    html[data-theme="light"] .step-badge{
      background:rgba(79,70,229,.16);
      color:#4f46e5;
    }
    .step-title{
      font-weight:600;
      font-size:.95rem;
      margin-bottom:.15rem;
    }
    .step-text{
      font-size:.87rem;
      color:var(--muted-color);
    }

    /* TESTIMONI */
    .testimonial-section{
      padding:2.3rem 0 1.7rem;
      background:var(--bg-surface);
    }
    .testimonial-card{
      border-radius:18px;
      padding:1rem 1rem .95rem;
      border:1px solid #1f2937;
      background:
        radial-gradient(circle at top left,rgba(129,140,248,.28),transparent 55%),
        #020617;
      height:100%;
    }
    html[data-theme="light"] .testimonial-card{
      background:
        radial-gradient(circle at top left,rgba(129,140,248,.18),transparent 55%),
        #f9fafb;
      border-color:#e2e8f0;
    }
    .testimonial-name{font-weight:600;font-size:.95rem;}
    .testimonial-meta{font-size:.78rem;color:var(--muted-color);}
    .testimonial-text{font-size:.88rem;margin-top:.35rem;}

    /* FAQ */
    .faq-section{
      padding:2.4rem 0 1.8rem;
      background:#020617;
    }
    html[data-theme="light"] .faq-section{
      background:#f8fafc;
    }
    .faq-accordion .accordion-item{
      border-radius:14px;
      margin-bottom:.65rem;
      overflow:hidden;
      border:1px solid #1f2937;
    }
    .faq-accordion .accordion-button{
      font-weight:600;
      font-size:.92rem;
      padding:.65rem .9rem;
      background:#020617;
      color:var(--text-main);
    }
    .faq-accordion .accordion-body{
      font-size:.88rem;
      padding:.7rem .9rem .8rem;
      color:var(--muted-color);
      background:#020617;
    }
    html[data-theme="light"] .faq-accordion .accordion-item{
      border-color:#e2e8f0;
    }
    html[data-theme="light"] .faq-accordion .accordion-button{
      background:#f9fafb;
      color:#0f172a;
    }
    html[data-theme="light"] .faq-accordion .accordion-body{
      background:#f9fafb;
      color:#64748b;
    }

    /* KONTAK & FOOTER */
    .contact-section{
      padding:2.2rem 0 1.5rem;
      background:#020617;
      border-top:1px solid #1f2937;
    }
    html[data-theme="light"] .contact-section{
      background:#f9fafb;
      border-color:#e2e8f0;
    }
    .contact-pill{
      display:inline-flex;
      align-items:center;
      gap:.4rem;
      padding:.25rem .7rem;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.6);
      font-size:.78rem;
      color:var(--muted-color);
    }
    .contact-link{
      display:inline-flex;
      align-items:center;
      gap:.45rem;
      font-size:.9rem;
      text-decoration:none;
      color:var(--text-main);
    }
    .contact-link i{font-size:1.1rem;}
    .contact-link:hover{
      text-decoration:none;
      opacity:.88;
    }
    .footer-mini{
      border-top:1px solid rgba(148,163,184,.4);
      margin-top:1.25rem;
      padding-top:.7rem;
      font-size:.78rem;
      color:var(--muted-color);
    }

    /* SEARCH OVERLAY */
    .search-overlay{
      position:fixed;
      top:var(--nav-h);
      left:0;
      right:0;
      z-index:1200;
      padding:.5rem 0;
      transform:translateY(-100%);
      opacity:0;
      pointer-events:none;
      transition:transform .25s ease, opacity .25s ease;
      background:rgba(15,23,42,.98);
      border-bottom:1px solid #1f2937;
    }
    html[data-theme="light"] .search-overlay{
      background:rgba(248,250,252,.98);
      border-color:#e2e8f0;
    }
    .search-overlay.open{
      transform:translateY(0);
      opacity:1;
      pointer-events:auto;
    }
    .search-overlay-inner{
      display:flex;
      align-items:center;
      gap:.5rem;
      border-radius:999px;
      padding:.4rem .75rem;
      background:#020617;
      box-shadow:0 10px 30px rgba(15,23,42,.55);
    }
    html[data-theme="light"] .search-overlay-inner{
      background:#ffffff;
    }
    .search-overlay .overlay-icon{
      color:#64748b;
    }
    .search-overlay .search-input{
      border:none;
      background:transparent;
      padding-left:0;
      box-shadow:none;
      color:var(--text-main);
    }
    .search-overlay .search-input:focus{
      outline:none;
      box-shadow:none;
    }
    .search-overlay .close-search i{
      font-size:1.1rem;
    }

    .d-flex.gap-1 > *{
      margin:0 !important;
    }

  </style>
</head>
<body class="loaded">

<div class="container-fluid">
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg nav-glass" id="mainNavbar">
    <div class="container">
      <a class="navbar-brand" href="index.html">D&D Multiverse Digital</a>
      <div class="d-flex align-items-center d-lg-none ms-auto gap-1">
        <!-- Search icon mobile -->
        <button class="nav-icon-btn d-inline-flex" type="button" data-nav-search="">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
        <!-- Menu toggler mobile -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
      <div class="collapse navbar-collapse" id="mainNav">
        <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-1">
          <li class="nav-item"><a class="nav-link active" data-scroll="" href="#produk">Produk</a></li>
          <li class="nav-item"><a class="nav-link" href="#keunggulan">Keunggulan</a></li>
          <li class="nav-item"><a class="nav-link" href="#kontak">Tentang</a></li>
        </ul>
        <!-- ICON UNTUK DESKTOP -->
        <div class="d-flex align-items-center gap-2 ms-lg-3">
          <button class="nav-icon-btn position-relative d-none d-lg-inline-flex" title="Cari Produk" data-nav-search="">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
          <button id="navDarkBtn" class="nav-icon-btn position-relative" title="Toggle Dark Mode">
            <i class="fa-solid fa-sun"></i>
          </button>
          <button class="nav-icon-btn position-relative" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasCart">
            <i class="fa-solid fa-bag-shopping"></i>
            <span id="navCartCount" class="nav-cart-count">0</span>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- HERO SECTION -->
  <section class="hero-section">
    <div class="container">
      <div class="row g-4 align-items-center">
        <div class="col-md-7">
          <div class="hero-badge">
            <i class="fa-solid fa-shield-check"></i>
            <span>Layanan digital premium, aman, dan bergaransi resmi</span>
          </div>
          <h1 class="hero-title">
            Semua Layanan Digital Premium<br class="d-none d-md-block">
            Dalam Satu Portal Resmi.
          </h1>
          <p class="hero-subtitle">
            D&D Multiverse Digital menyediakan berbagai layanan digital premium
            seperti Netflix, YouTube Premium, Spotify, Canva Pro, dan aplikasi lain
            dengan harga kompetitif, proses cepat, dan dukungan admin profesional.
          </p>
          <div class="hero-actions">
            <a href="#listProduk" data-scroll="" class="btn btn-primary px-4 py-2" style="background:var(--gradient-primary);border:none;">
              <i class="fa-solid fa-tags me-2"></i>
              Lihat Harga & Produk
            </a>
            <a href="https://wa.me/6287809236556?text=Halo%20Admin%20D%26D%20Multiverse%20Digital%2C%20saya%20ingin%20bertanya%20terkait%20layanan%20digital."
               target="_blank"
               class="btn btn-outline-success px-4 py-2">
              <i class="fa-brands fa-whatsapp me-2"></i>
              Hubungi Admin
            </a>
          </div>
          <div class="d-flex flex-wrap align-items-center gap-3 mt-3">
            <div class="hero-pill">
              <i class="fa-solid fa-bolt"></i>
              <span>Estimasi proses 1–10 menit pada jam operasional</span>
            </div>
            <div class="hero-pill">
              <i class="fa-solid fa-shield-halved"></i>
              <span>Garansi berlaku selama masa langganan sesuai ketentuan</span>
            </div>
          </div>
        </div>
        <div class="col-md-5">
          <div class="row g-3">
            <div class="col-6">
              <div class="hero-stat-card">
                <div class="hero-stat-value">1.000+</div>
                <div class="hero-stat-label">Pesanan terselesaikan</div>
              </div>
            </div>
            <div class="col-6">
              <div class="hero-stat-card">
                <div class="hero-stat-value">4,9/5</div>
                <div class="hero-stat-label">Rata-rata kepuasan pelanggan</div>
              </div>
            </div>
            <div class="col-12">
              <div class="hero-stat-card d-flex align-items-center gap-3">
                <div class="benefit-icon-wrap mb-0">
                  <i class="fa-solid fa-qrcode"></i>
                </div>
                <div>
                  <div class="hero-stat-label mb-1">Metode Pembayaran</div>
                  <div class="hero-stat-value">QRIS • Transfer • E-Wallet*</div>
                  <div class="small text-muted mt-1">
                    *Disesuaikan dengan kebijakan terkini D&D Multiverse Digital.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Search Overlay -->
  <div id="searchOverlay" class="search-overlay">
    <div class="container">
      <div class="search-overlay-inner">
        <i class="fas fa-search overlay-icon"></i>
        <input type="text" id="searchInput" class="form-control search-input" placeholder="Cari layanan digital yang Anda butuhkan...">
        <button class="btn btn-link text-decoration-none close-search" id="btnCloseSearch" aria-label="Tutup">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- MAIN -->
  <main id="produk">

    <!-- CARA ORDER -->
    <section class="steps-section" id="cara-order">
      <div class="container">
        <h2 class="section-title">Cara Pemesanan di D&D Multiverse Digital</h2>
        <p class="section-subtitle">Langkah sederhana bagi pelanggan yang baru pertama kali memesan layanan digital.</p>
        <div class="row g-3 g-md-4 mt-2">
          <div class="col-md-6">
            <div class="step-item">
              <div class="step-badge">1</div>
              <div>
                <div class="step-title">Pilih produk dan varian</div>
                <p class="step-text">
                  Telusuri daftar produk di bawah, klik tombol <strong>Detail</strong> untuk melihat varian,
                  kemudian tentukan paket yang sesuai dengan kebutuhan Anda.
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="step-item">
              <div class="step-badge">2</div>
              <div>
                <div class="step-title">Tambahkan ke Keranjang</div>
                <p class="step-text">
                  Tekan tombol <strong>Keranjang</strong> pada varian yang Anda pilih,
                  lalu periksa kembali detail pesanan melalui menu keranjang di pojok kanan bawah.
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="step-item">
              <div class="step-badge">3</div>
              <div>
                <div class="step-title">Checkout melalui WhatsApp</div>
                <p class="step-text">
                  Tekan tombol <strong>Checkout via WhatsApp</strong>; sistem akan menyiapkan format
                  pesanan secara otomatis. Anda cukup mengirimkannya kepada admin resmi.
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="step-item">
              <div class="step-badge">4</div>
              <div>
                <div class="step-title">Lakukan pembayaran & tunggu proses</div>
                <p class="step-text">
                  Lakukan pembayaran sesuai instruksi admin. Setelah itu, pesanan akan diproses dan
                  akses akun akan disampaikan melalui WhatsApp sesuai data yang Anda berikan.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PRODUK (LIST DARI SHEET) -->
    <section class="products-section" id="listProduk">
      <div class="container">
        <h2 class="section-title">Produk Digital Terpilih</h2>
        <p class="section-subtitle">
          Akses resmi ke berbagai layanan digital premium dengan harga terjangkau dan proses yang transparan.
        </p>
        <div class="row g-3" id="produk-list">
          <div class="col-12">
            <div class="loading">
              <div class="spinner"></div>
            </div>
          </div>
        </div>
        <div class="load-more-wrap">
          <button id="btnLoadMore" class="btn btn-outline-primary px-4 py-2 mt-2">
            <i class="fa-solid fa-rotate"></i> Muat Lebih
          </button>
        </div>
      </div>
    </section>

    <!-- KEUNGGULAN -->
    <section class="benefit-section" id="keunggulan">
      <div class="container">
        <h2 class="section-title">Mengapa Memilih D&D Multiverse Digital?</h2>
        <p class="section-subtitle">
          Bukan sekadar murah, tetapi juga jelas, aman, dan mudah dipahami bahkan oleh pengguna baru.
        </p>
        <div class="row g-3 g-md-4 mt-2">
          <div class="col-md-3 col-sm-6">
            <div class="benefit-card">
              <div class="benefit-icon-wrap">
                <i class="fa-solid fa-shield-heart"></i>
              </div>
              <div class="benefit-title">Aman & Terpercaya</div>
              <p class="benefit-text">
                Telah melayani banyak pelanggan dengan catatan transaksi yang rapi dan terdokumentasi.
                Setiap pesanan diproses melalui prosedur yang jelas dan dapat dipertanggungjawabkan.
              </p>
            </div>
          </div>
          <div class="col-md-3 col-sm-6">
            <div class="benefit-card">
              <div class="benefit-icon-wrap">
                <i class="fa-solid fa-bolt"></i>
              </div>
              <div class="benefit-title">Proses Cepat</div>
              <p class="benefit-text">
                Estimasi proses 1–10 menit pada jam operasional, dengan komunikasi yang informatif
                apabila terjadi antrean atau kendala teknis tertentu.
              </p>
            </div>
          </div>
          <div class="col-md-3 col-sm-6">
            <div class="benefit-card">
              <div class="benefit-icon-wrap">
                <i class="fa-solid fa-arrows-rotate"></i>
              </div>
              <div class="benefit-title">Garansi Masa Pakai</div>
              <p class="benefit-text">
                Jika terjadi kendala pada akun selama masa garansi dan sesuai ketentuan,
                akan dibantu proses penyesuaian atau penggantian sesuai kebijakan yang berlaku.
              </p>
            </div>
          </div>
          <div class="col-md-3 col-sm-6">
            <div class="benefit-card">
              <div class="benefit-icon-wrap">
                <i class="fa-solid fa-headset"></i>
              </div>
              <div class="benefit-title">Dukungan Responsif</div>
              <p class="benefit-text">
                Admin siap menjelaskan perbedaan paket, ketentuan penggunaan, serta membantu
                apabila terdapat pertanyaan terkait teknis atau masa langganan akun.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- TESTIMONI -->
    <section class="testimonial-section" id="testimoni">
      <div class="container">
        <h2 class="section-title">Testimoni Pelanggan</h2>
        <p class="section-subtitle">
          Ringkasan pengalaman beberapa pelanggan yang telah menggunakan layanan digital di D&D Multiverse Digital.
        </p>
        <div class="row g-3 g-md-4 mt-2">
          <div class="col-md-4">
            <div class="testimonial-card">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <div class="testimonial-name">R*** – Lombok</div>
                  <div class="testimonial-meta">YouTube Premium 3 Bulan</div>
                </div>
                <div class="text-warning">
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star-half-stroke"></i>
                </div>
              </div>
              <p class="testimonial-text">
                “Proses sangat cepat, penjelasan jelas, dan dibantu hingga akun benar-benar aktif.
                Saya berencana memperpanjang kembali setelah masa pakai berakhir.”
              </p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="testimonial-card">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <div class="testimonial-name">S*** – Mahasiswa</div>
                  <div class="testimonial-meta">Canva Pro & CapCut Pro</div>
                </div>
                <div class="text-warning">
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                </div>
              </div>
              <p class="testimonial-text">
                “Untuk keperluan tugas kuliah dan konten, layanan ini sangat membantu.
                Harganya masih realistis untuk kondisi mahasiswa, dengan kualitas akses yang baik.”
              </p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="testimonial-card">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <div class="testimonial-name">A*** – Freelancer</div>
                  <div class="testimonial-meta">Netflix & Spotify</div>
                </div>
                <div class="text-warning">
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                </div>
              </div>
              <p class="testimonial-text">
                “Sudah beberapa kali melakukan perpanjangan dan sejauh ini berjalan lancar.
                Setiap kali muncul kendala, admin selalu responsif dan membantu hingga selesai.”
              </p>
            </div>
          </div>
        </div>
        <p class="small text-muted mt-3">
          *Testimoni di atas merupakan rangkuman dari beberapa pelanggan.
          Bukti transfer dan dokumentasi testimoni yang lebih lengkap dapat diminta langsung kepada admin resmi.
        </p>
      </div>
    </section>

    <!-- FAQ -->
    <section class="faq-section" id="faq">
      <div class="container">
        <h2 class="section-title">Pertanyaan yang Sering Diajukan</h2>
        <p class="section-subtitle">
          Jika Anda masih ragu atau memiliki pertanyaan, beberapa hal berikut dapat membantu menjelaskan layanan kami.
        </p>
        <div class="row g-4 mt-2">
          <div class="col-md-7">
            <div class="accordion faq-accordion" id="faqAccordion">
              <div class="accordion-item">
                <h2 class="accordion-header" id="faqOneHeading">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqOne" aria-expanded="false" aria-controls="faqOne">
                    Berapa lama proses pemesanan biasanya?
                  </button>
                </h2>
                <div id="faqOne" class="accordion-collapse collapse" aria-labelledby="faqOneHeading" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Estimasi proses normal berada di kisaran
                    <strong>1–10 menit</strong> pada jam operasional.
                    Apabila sedang terjadi antrean atau kendala teknis,
                    admin akan menyampaikan informasi pembaruan estimasi kepada Anda.
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="faqTwoHeading">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqTwo" aria-expanded="false" aria-controls="faqTwo">
                    Bagaimana jika akun bermasalah di tengah masa langganan?
                  </button>
                </h2>
                <div id="faqTwo" class="accordion-collapse collapse" aria-labelledby="faqTwoHeading" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Silakan segera menghubungi admin dengan menyertakan bukti pemesanan.
                    Selama masih dalam masa garansi dan sesuai ketentuan,
                    D&D Multiverse Digital akan membantu proses penyesuaian atau penggantian akun
                    sesuai kebijakan yang berlaku.
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="faqThreeHeading">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqThree" aria-expanded="false" aria-controls="faqThree">
                    Metode pembayaran apa saja yang tersedia?
                  </button>
                </h2>
                <div id="faqThree" class="accordion-collapse collapse" aria-labelledby="faqThreeHeading" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Saat ini pembayaran dapat dilakukan melalui
                    <strong>QRIS</strong> dan metode lain yang diinformasikan admin
                    (seperti transfer bank atau dompet digital tertentu).
                    Rincian rekening atau tujuan pembayaran akan dikirim setelah Anda checkout melalui WhatsApp.
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="faqFourHeading">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqFour" aria-expanded="false" aria-controls="faqFour">
                    Apakah akun dapat digunakan pada banyak perangkat?
                  </button>
                </h2>
                <div id="faqFour" class="accordion-collapse collapse" aria-labelledby="faqFourHeading" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Setiap platform memiliki
                    <strong>aturan penggunaan</strong> yang berbeda.
                    Admin akan menjelaskan apakah akun boleh digunakan di beberapa perangkat,
                    hanya pada satu perangkat, atau terdapat batasan login tertentu
                    sebelum Anda melakukan pembayaran.
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="faqFiveHeading">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqFive" aria-expanded="false" aria-controls="faqFive">
                    Apakah layanan ini legal dan aman digunakan?
                  </button>
                </h2>
                <div id="faqFive" class="accordion-collapse collapse" aria-labelledby="faqFiveHeading" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    D&D Multiverse Digital berupaya mengikuti
                    <strong>ketentuan penggunaan</strong> dari masing-masing platform.
                    Jenis akun (misalnya sharing, personal, family, dan lain-lain)
                    akan dijelaskan secara terbuka oleh admin sesuai produk yang Anda pilih,
                    sehingga Anda dapat menggunakan layanan dengan lebih bijak.
                  </div>
                </div>
              </div>

            </div>
          </div>

          <div class="col-md-5">
            <div class="benefit-card">
              <div class="benefit-icon-wrap mb-2">
                <i class="fa-solid fa-circle-question"></i>
              </div>
              <div class="benefit-title mb-1">
                Masih memiliki pertanyaan lain?
              </div>
              <p class="benefit-text mb-3">
                Apabila pertanyaan Anda belum terjawab melalui FAQ,
                silakan menghubungi admin melalui WhatsApp.
                Sampaikan kebutuhan Anda, dan admin akan membantu merekomendasikan
                paket yang paling sesuai.
              </p>
              <a href="https://wa.me/6287809236556?text=Halo%20Admin%20D%26D%20Multiverse%20Digital%2C%20saya%20ingin%20bertanya%20lebih%20lanjut%20mengenai%20layanan%20digital."
                 target="_blank"
                 class="btn btn-success w-100">
                <i class="fa-brands fa-whatsapp me-2"></i>
                Tanya Admin Sekarang
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- KONTAK & FOOTER -->
    <section class="contact-section" id="kontak">
      <div class="container">
        <div class="row g-3 align-items-start">
          <div class="col-md-5">
            <span class="contact-pill mb-2">
              <i class="fa-solid fa-building"></i>
              <span>D&D Multiverse Digital</span>
            </span>
            <h3 class="mt-2 mb-2" style="font-size:1.35rem;font-weight:700;">
              Hubungi & Ikuti D&D Multiverse Digital
            </h3>
            <p class="mb-2" style="font-size:.9rem;color:var(--muted-color);">
              Untuk informasi promo, pembaruan layanan, serta panduan penggunaan,
              Anda dapat menyimpan kontak resmi dan menghubungi kami melalui kanal berikut.
            </p>
            <ul class="list-unstyled small mb-0">
              <li>Jam operasional: <strong>08.00 – 23.00 WIB</strong></li>
              <li>Di luar jam tersebut, respon dapat sedikit lebih lambat.</li>
            </ul>
          </div>
          <div class="col-md-7">
            <div class="row g-2">
              <div class="col-sm-6">
                <a href="https://wa.me/6287809236556?text=Halo%20Admin%20D%26D%20Multiverse%20Digital%2C%20saya%20ingin%20melakukan%20pemesanan%20layanan%20digital."
                   target="_blank"
                   class="contact-link">
                  <i class="fa-brands fa-whatsapp text-success"></i>
                  <div>
                    <div>WhatsApp Admin</div>
                    <div class="small text-muted">
                      Pemesanan layanan digital, konfirmasi pembayaran, dan konsultasi paket.
                    </div>
                  </div>
                </a>
              </div>
              <div class="col-sm-6">
                <a href="https://wa.me/6287809236556?text=Halo%20Admin%2C%20saya%20ingin%20mendapatkan%20informasi%20terbaru%20mengenai%20promo%20dan%20layanan."
                   target="_blank"
                   class="contact-link">
                  <i class="fa-brands fa-whatsapp text-success"></i>
                  <div>
                    <div>Informasi & Promo</div>
                    <div class="small text-muted">
                      Informasi berkala mengenai pembaruan layanan dan promo yang sedang berjalan.
                    </div>
                  </div>
                </a>
              </div>
              <div class="col-sm-6">
                <a href="#" class="contact-link">
                  <i class="fa-solid fa-globe"></i>
                  <div>
                    <div>Website Resmi</div>
                    <div class="small text-muted">
                      Halaman ini merupakan situs resmi D&D Multiverse Digital untuk daftar harga.
                    </div>
                  </div>
                </a>
              </div>
              <!-- Slot tambahan jika suatu saat ingin menambah kanal lain -->
            </div>
          </div>
        </div>
        <div class="footer-mini mt-3">
          <div class="d-flex flex-wrap justify-content-between gap-2">
            <span>© <span id="footerYear">2025</span> D&D Multiverse Digital. All rights reserved.</span>
            <span>Crafted with dedication by Brandon Tan.</span>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>

<!-- Modal Detail -->
<div class="modal fade" id="produkModal" tabindex="-1" aria-labelledby="produkModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content" id="produkModalContent">
      <div class="modal-header">
        <h5 class="modal-title" id="produkModalLabel">
          <i class="fas fa-info-circle me-2"></i> Detail Produk
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Tutup"></button>
      </div>
      <div class="modal-body" id="modalBody"></div>
      <div class="modal-footer">
        <button class="btn btn-outline-primary" id="modalAddCart">
          <i class="fa-solid fa-cart-plus me-2"></i><span>Keranjang</span>
        </button>
        <a href="#" class="btn btn-success" id="modalPesanBtn" target="_blank">
          <i class="fab fa-whatsapp me-2"></i><span>Pesan Sekarang</span>
        </a>
      </div>
    </div>
  </div>
</div>

<!-- Offcanvas Cart -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasCart" aria-labelledby="offcanvasCartLabel">
  <div class="offcanvas-header">
    <button class="btn btn-link text-decoration-none d-inline d-md-none me-2" data-bs-dismiss="offcanvas" aria-label="Kembali">
      <i class="fa-solid fa-chevron-left"></i>
    </button>
    <h5 class="offcanvas-title" id="offcanvasCartLabel">
      <i class="fa-solid fa-basket-shopping me-2"></i>Keranjang
    </h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body d-flex flex-column">
    <div id="cartItems" class="mb-3">
      <div class="empty-state">
        <i class="fa-regular fa-face-frown"></i>
        <p>Keranjang kosong</p>
      </div>
    </div>
    <div class="d-flex justify-content-between fw-bold fs-5">
      <span>Total</span>
      <span id="cartTotal">Rp0</span>
    </div>
    <div class="mt-3 d-grid gap-2">
      <button class="btn btn-outline-danger" id="btnClearCart">
        <i class="fa-solid fa-trash me-2"></i>Hapus Keranjang
      </button>
      <a href="#" target="_blank" id="btnCheckoutWA" class="btn btn-success">
        <i class="fab fa-whatsapp me-2"></i>Checkout via WhatsApp
      </a>
    </div>
  </div>
</div>

<!-- Floating buttons -->
<button class="floating-cart" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasCart" aria-controls="offcanvasCart">
  <i class="fa-solid fa-bag-shopping"></i><span class="count" id="cartCount">0</span>
</button>
<button class="floating-dark" id="floatingDarkBtn" title="Toggle Dark Mode">
  <i class="fa-solid fa-sun"></i>
</button>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // Pastikan variabel tinggi navbar up-to-date saat modal dibuka
  const navbar = document.getElementById('mainNavbar');
  function refreshNavH(){
    const h = navbar ? navbar.offsetHeight : 64;
    document.documentElement.style.setProperty('--nav-h', h + 'px');
  }
  ['resize','orientationchange'].forEach(ev=>window.addEventListener(ev, refreshNavH));
  document.addEventListener('shown.bs.modal', refreshNavH);
  document.addEventListener('shown.bs.collapse', refreshNavH);
  document.addEventListener('hidden.bs.collapse', refreshNavH);
  refreshNavH();
</script>

<script>
  // ========= SHEETS CONFIG =========
  const SHEET_ID = "16fNB7oX2-PIIuNDjrzL3xgtNSQTTnxC2gxW2x78GoHI"; // tetap referensi sama, harga dasar dari sini
  const SHEET_NAME = "Produk";
  const DEFAULT_WA = "6287809236556"; // nomor WA D&D Multiverse Digital
  const SHEET_JSON_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(SHEET_NAME)}`;

  // ========= STATE =========
  let produkVariants = []; // tiap baris sheet = varian
  let produkGroups = [];   // hasil dikelompokkan per kolom group
  let viewData = [];
  let page = 1;
  const perPage = 12;

  const produkList = document.getElementById("produk-list");
  const searchInput = document.getElementById("searchInput");
  const btnLoadMore = document.getElementById("btnLoadMore");

  const CART_KEY = "dnd_cart";
  const WISH_KEY = "dnd_wishlist";

  const categoryIconsFA = {
    "Langganan":"fa-bell",
    "Streaming":"fa-tv",
    "Penyimpanan":"fa-hard-drive",
    "Software":"fa-puzzle-piece",
    "Desain":"fa-palette",
    "Produktivitas":"fa-book",
    "AI Tools":"fa-robot",
    "Keamanan":"fa-shield-halved",
    "Game":"fa-gamepad",
    "Voucher":"fa-gift",
    "Instagram":"fa-brands fa-instagram",
    "TikTok":"fa-brands fa-tiktok"
  };
  const categories = [
    {value:"", label:"Semua", icon:"fa-rotate"},
    ...["Instagram","TikTok","Langganan","Streaming","Penyimpanan","Software","Desain","Produktivitas","AI Tools","Keamanan","Game","Voucher"]
      .map(k=>({value:k,label:k,icon:categoryIconsFA[k]}))
  ];

  const money = n => `Rp${(Number(n)||0).toLocaleString('id-ID')}`;
  const getStorage = (k,f)=>{try{return JSON.parse(localStorage.getItem(k))??f;}catch{return f;}};
  const setStorage = (k,v)=>localStorage.setItem(k,JSON.stringify(v));

  function setNavOffset(){
    const nav = document.getElementById('mainNavbar');
    if(!nav) return;
    const h = nav.offsetHeight || 64;
    document.documentElement.style.setProperty('--nav-h', h + 'px');
  }
  window.addEventListener('resize', setNavOffset);
  document.addEventListener('shown.bs.collapse', setNavOffset);
  document.addEventListener('hidden.bs.collapse', setNavOffset);

  function showLoading(){
    produkList.innerHTML=`<div class="col-12"><div class="loading"><div class="spinner"></div></div></div>`;
  }

  // ===== Bangun grup dari varian (pakai kolom group) =====
  function buildGroups(){
    const map = new Map();

    produkVariants.forEach(v =>{
      const key = v.group || v.nama; // kalau group kosong, fallback nama
      let g = map.get(key);
      if(!g){
        g = {
          key,
          title: key,
          kategori: v.kategori,
          ikon: v.ikon,
          wa: v.wa || DEFAULT_WA,
          variants: [],
          minHarga: v.harga || 0,
          maxHargaLama: v.harga_lama || 0,
          available: Number(v.stok) > 0
        };
        map.set(key,g);
      }
      g.variants.push(v);
      if((v.harga || 0) < g.minHarga) g.minHarga = v.harga || 0;
      if((v.harga_lama || 0) > g.maxHargaLama) g.maxHargaLama = v.harga_lama || 0;
      if(Number(v.stok)>0) g.available = true;
    });

    produkGroups = Array.from(map.values());
  }

  // ===== Filter & Sort di level group =====
  function applyFilterSort(){
    const q = (searchInput?.value || "").toLowerCase();

    viewData = produkGroups.filter(g=>{
      const inTitle    = (g.title || "").toLowerCase().includes(q);
      const inVariants = g.variants.some(v => (v.nama || "").toLowerCase().includes(q));
      return (inTitle || inVariants);
    });

    page = 1;
  }

  // ===== Render card per group =====
  function renderProduk(append=false){
    const start=(page-1)*perPage;
    const slice=viewData.slice(start,start+perPage);

    if(!append) produkList.innerHTML="";

    if(slice.length===0 && !append){
      produkList.innerHTML=`
        <div class="col-12">
          <div class="empty-state">
            <i class="fas fa-search"></i>
            <h4>Produk tidak ditemukan</h4>
            <p>Silakan ubah kata kunci pencarian atau periksa kembali kategori yang dipilih.</p>
          </div>
        </div>`;
      btnLoadMore.style.display="none";
      return;
    }

    slice.forEach((group,idx)=>{
      const col=document.createElement("div");
      col.className="col-lg-3 col-md-4 col-sm-6 col-6";

      const catIconClass = categoryIconsFA[group.kategori] || "fa-box";
      const hasDiscount  = (group.maxHargaLama||0) > (group.minHarga||0);
      const stokOK       = !!group.available;

      const wishlist=getStorage(WISH_KEY,[]);
      const wished = wishlist.includes(group.key);

      col.innerHTML=`
        <div class="card product-card fade-in" style="animation-delay:${idx*0.03}s">
          <button class="wishlist-btn ${wished?'active':''}" title="Favorit"
                  data-wish="${encodeURIComponent(group.key)}">
            <i class="fa-solid fa-heart"></i>
          </button>
          <div class="category-badge">
            <i class="fa-solid ${catIconClass}"></i>
            <span>${group.kategori || ''}</span>
          </div>
          <div class="card-body p-3 text-center">
            <div class="product-icon">
              <img src="${group.ikon||''}" alt="${group.title||''}"
                   onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHJ4PSI4IiBmaWxsPSIjZmZmIiBzdHJva2U9IiNlMmU4ZjAiIHN0cm9rZS13aWR0aD0iMSIvPjwvc3ZnPg=='">
            </div>
            <h6 class="product-title">${group.title||''}</h6>
            <div class="price-wrap">
              <span class="price">Mulai ${money(group.minHarga)}</span>
              ${hasDiscount?`<span class="price-old">${money(group.maxHargaLama)}</span>`:""}
            </div>
            <div class="d-flex align-items-center justify-content-center gap-2 mb-2">
              <span class="badge ${stokOK?'bg-success-subtle text-success-emphasis':'bg-danger-subtle text-danger-emphasis'}">
                ${stokOK?'Tersedia':'Habis'}
              </span>
              <span class="badge bg-secondary-subtle text-secondary-emphasis">
                ${group.variants.length} varian
              </span>
            </div>
            <div class="product-actions d-flex">
              <button class="btn-detail icon-btn" ${stokOK?'':'disabled'}
                      data-detail="${idx+start}" aria-label="Lihat varian">
                <i class="fa-solid fa-circle-info"></i>
              </button>
              <a class="quick-wa icon-btn ${stokOK?'':'disabled'}"
                 ${stokOK?'':'aria-disabled="true"'}
                 target="_blank" aria-label="WhatsApp"
                 href="https://wa.me/${encodeURIComponent(group.wa||DEFAULT_WA)}?text=${
                   encodeURIComponent(`Halo Admin D&D Multiverse Digital, saya tertarik dengan produk ${group.title}. Mohon informasi detail varian dan harganya.`)
                 }">
                <i class="fa-brands fa-whatsapp"></i>
              </a>
            </div>
          </div>
        </div>`;
      produkList.appendChild(col);
    });

    btnLoadMore.style.display = (viewData.length > (start + slice.length)) ? "inline-block" : "none";
  }

  // ===== Modal Detail & varian =====
  const modalEl=document.getElementById('produkModal');
  const bsModal=new bootstrap.Modal(modalEl);
  const modalAddCart=document.getElementById('modalAddCart');
  const modalBody=document.getElementById('modalBody');
  let currentDetailIdx=null;

  function showDetailByGlobalIndex(globalIdx){
    const group = viewData[globalIdx];
    currentDetailIdx = globalIdx;

    const catIconClass = categoryIconsFA[group.kategori] || "fa-box";
    const primaryVariant = group.variants.find(v => Number(v.stok)>0) || group.variants[0];

    const variantsHTML = group.variants.map((v,i)=>{
      const fitur = (v.deskripsi||[]).map(li =>
        `<li class="variant-feature-item">
          <i class="fas fa-check-circle variant-feature-icon me-2"></i>
          <span>${li}</span>
        </li>`
      ).join("");
      const stokOK = Number(v.stok)>0;

      return `
        <div class="variant-card mb-3">
          <div class="variant-card-header d-flex justify-content-between align-items-start mb-2">
            <div>
              <div class="variant-card-title fw-semibold">${v.nama}</div>
              <div class="variant-card-label small text-muted">Varian ${i+1}</div>
            </div>
            <div class="text-end">
              <div class="variant-card-price fw-bold">${money(v.harga)}</div>
              ${(v.harga_lama && v.harga_lama>v.harga)
                ? `<div class="variant-card-price-old small">${money(v.harga_lama)}</div>`
                : ""
              }
              <div class="mt-1">
                <span class="badge ${stokOK?'bg-success-subtle text-success-emphasis':'bg-danger-subtle text-danger-emphasis'}">
                  ${stokOK?'Tersedia':'Habis'}
                </span>
              </div>
            </div>
          </div>

          ${fitur ? `<ul class="variant-features list-unstyled mb-2">${fitur}</ul>` : ""}

          <div class="d-flex gap-2 flex-wrap">
            <button class="btn btn-sm btn-outline-primary"
                    data-add-variant="${encodeURIComponent(v.nama)}"
                    ${stokOK ? '' : 'disabled'}>
              <i class="fa-solid fa-cart-plus me-1"></i>Keranjang
            </button>
            <a href="https://wa.me/${encodeURIComponent(v.wa || group.wa || DEFAULT_WA)}?text=${
                encodeURIComponent(`Halo Admin D&D Multiverse Digital, saya ingin memesan ${v.nama} dengan harga ${money(v.harga)}.`)
              }"
              target="_blank"
              class="btn btn-sm btn-success ${stokOK ? '' : 'disabled'}">
              <i class="fab fa-whatsapp me-1"></i>Pesan varian ini
            </a>
          </div>
        </div>`;
    }).join("");

    modalBody.innerHTML = `
      <div class="modal-product-main mb-3">
        <div class="row align-items-center g-3">
          <div class="col-md-4 text-center mb-2 mb-md-0">
            <div class="product-icon modal-product-icon mx-auto">
              <img src="${group.ikon || ''}" alt="${group.title || ''}"
                  style="width:60px;height:60px;"
                  onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHJ4PSIxMiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjZTJlOGYwIiBzdHJva2Utd2lkdGg9IjEiLz48L3N2Zz4='">
            </div>
            <span class="badge modal-category-pill mt-2 d-inline-flex align-items-center gap-1">
              <i class="fa-solid ${catIconClass}"></i>
              <span>${group.kategori || ''}</span>
            </span>
          </div>
          <div class="col-md-8">
            <h5 class="modal-product-title mb-1">${group.title || ''}</h5>
            <p class="modal-product-subtitle mb-2">
              Tersedia <strong>${group.variants.length} varian</strong> dengan harga mulai
              <strong>${money(group.minHarga)}</strong>.
            </p>
            <div class="modal-product-prices d-flex align-items-baseline gap-2">
              <span class="modal-price-main">${money(group.minHarga)}</span>
              ${(group.maxHargaLama && group.maxHargaLama>group.minHarga)
                ? `<span class="modal-price-old">${money(group.maxHargaLama)}</span>`
                : ""
              }
            </div>
          </div>
        </div>
      </div>

      <hr class="my-3">

      <div class="modal-variant-list">
        ${variantsHTML}
      </div>
    `;

    const modalPesanBtn = document.getElementById("modalPesanBtn");
    if(primaryVariant){
      modalPesanBtn.href =
        `https://wa.me/${encodeURIComponent(primaryVariant.wa || group.wa || DEFAULT_WA)}?text=${
          encodeURIComponent(`Halo Admin D&D Multiverse Digital, saya ingin memesan ${primaryVariant.nama} dengan harga ${money(primaryVariant.harga)}.`)
        }`;
      modalAddCart.disabled = !(Number(primaryVariant.stok)>0);
      modalAddCart.dataset.primaryVariant = primaryVariant.nama;
    }else{
      modalPesanBtn.href = "#";
      modalAddCart.disabled = true;
      delete modalAddCart.dataset.primaryVariant;
    }

    bsModal.show();
  }

  (function enableModalSwipeClose(){
    const content=document.getElementById('produkModalContent'); let startY=null;
    content.addEventListener('touchstart',e=>{startY=e.touches[0].clientY;},{passive:true});
    content.addEventListener('touchmove',e=>{
      if(startY===null)return;
      const dy=e.touches[0].clientY-startY;
      if(dy>80){startY=null; bsModal.hide();}
    }, {passive:true});
    content.addEventListener('touchend',()=>{startY=null;});
  })();

  modalBody.addEventListener('click',(e)=>{
    const btn = e.target.closest('[data-add-variant]');
    if(!btn) return;
    const namaVar = decodeURIComponent(btn.dataset.addVariant);
    addToCart(namaVar,1);
    new bootstrap.Offcanvas('#offcanvasCart').show();
  });

  // ===== Load data dari Sheet =====
  async function loadProdukFromSheet(){
    showLoading();
    try{
      const res=await fetch(SHEET_JSON_URL,{cache:'no-store'});
      const text=await res.text();
      const json=JSON.parse(text.substring(47,text.length-2));
      const rows=json.table.rows||[];

      // nama, harga_dasar, ikon, deskripsi, kategori, wa, harga_dasar_lama, stok, kode, group
      produkVariants = rows.map((r,idx)=>{
        const c=r.c||[];

        const nama       = c[0]?.v ?? "";
        const baseHarga  = Number(c[1]?.v ?? 0) || 0;
        const ikon       = c[2]?.v ?? "";
        const deskripsi  = (c[3]?.v ?? "").toString().split("||").map(s=>s.trim()).filter(Boolean);
        const kategori   = c[4]?.v ?? "";
        const wa         = c[5]?.v ?? DEFAULT_WA;
        const baseHargaLama = Number(c[6]?.v ?? 0) || 0;
        const stok       = Number(c[7]?.v ?? 0) || 0;
        const kode       = c[8]?.v ?? "";
        const group      = c[9]?.v ?? "";

        // MARKUP +5.000 dari harga dasar referensi
        const markup = 5000;
        const harga = baseHarga > 0 ? baseHarga + markup : 0;
        const harga_lama = baseHargaLama > 0 ? baseHargaLama + markup : 0;

        return { id:idx, nama, harga, ikon, deskripsi, kategori, wa, harga_lama, stok, kode, group };
      });

      buildGroups();
      applyFilterSort();
      renderProduk(false);
      document.body.classList.add('loaded');
    }catch(err){
      console.error(err);
      produkList.innerHTML=`
        <div class="col-12">
          <div class="empty-state">
            <i class="fas fa-triangle-exclamation"></i>
            <h4>Gagal memuat data</h4>
            <p>Periksa kembali pengaturan akses Sheet, ID Sheet, atau koneksi internet Anda.</p>
            <code>${SHEET_JSON_URL}</code>
          </div>
        </div>`;
      btnLoadMore.style.display="none";
    }
  }

  // ===== Cart & Wishlist =====
  function getCart(){return getStorage(CART_KEY,[]);}
  function setCart(c){setStorage(CART_KEY,c); updateCartUI();}
  function addToCart(name,qty=1){
    const item = produkVariants.find(p=>p.nama===name);
    if(!item || !(Number(item.stok)>0)) return;
    const cart=getCart();
    const ex=cart.find(ci=>ci.nama===name);
    if(ex){ex.qty+=qty;}
    else{cart.push({nama:item.nama,harga:item.harga,wa:item.wa||DEFAULT_WA,qty});}
    setCart(cart);
  }
  function removeFromCart(name){setCart(getCart().filter(ci=>ci.nama!==name));}
  function changeQty(name,delta){
    const cart=getCart(); const it=cart.find(ci=>ci.nama===name); if(!it)return;
    it.qty=Math.max(1,(it.qty||1)+delta); setCart(cart);
  }
  function clearCart(){setCart([]);}

  function updateCartUI(){
    const cart=getCart();
    const totalQty = cart.reduce((a,b)=>a+(b.qty||1),0);
    document.getElementById("cartCount").textContent=totalQty;

    const wrap=document.getElementById("cartItems");
    if(cart.length===0){
      wrap.innerHTML=`<div class="empty-state"><i class="fa-regular fa-face-frown"></i><p>Keranjang kosong</p></div>`;
      document.getElementById("cartTotal").textContent=money(0);
      document.getElementById("btnCheckoutWA").href="#";
      document.getElementById('navCartCount').textContent = 0;
      document.dispatchEvent(new CustomEvent('dnd:cart-updated',{detail:{count:0,total:0}}));
      return;
    }
    let total=0;
    wrap.innerHTML=cart.map(ci=>{
      const sub=(ci.harga||0)*(ci.qty||1); total+=sub;
      return `
      <div class="d-flex align-items-center justify-content-between border rounded-3 p-2 mb-2">
        <div>
          <div class="fw-bold">${ci.nama}</div>
          <div class="text-muted small">${money(ci.harga)} × ${ci.qty}</div>
        </div>
        <div class="d-flex align-items-center gap-2">
          <button class="btn btn-sm btn-outline-secondary" data-qtyminus="${encodeURIComponent(ci.nama)}">-</button>
          <button class="btn btn-sm btn-outline-secondary" data-qtyplus="${encodeURIComponent(ci.nama)}">+</button>
          <button class="btn btn-sm btn-outline-danger" data-remove="${encodeURIComponent(ci.nama)}"><i class="fa-solid fa-trash"></i></button>
        </div>
      </div>`;
    }).join("");
    document.getElementById("cartTotal").textContent=money(total);

    const lines=cart.map(ci=>`• ${ci.nama} x${ci.qty} = ${money(ci.harga*ci.qty)}`).join('\n');
    const text=
`Halo Admin D&D Multiverse Digital,
saya ingin melakukan pemesanan layanan digital berikut:

${lines}

Total: ${money(total)}

Nama:
Metode pembayaran:
Catatan tambahan:

Terima kasih.`;
    const uniqueWAs=[...new Set(cart.map(c=>c.wa||DEFAULT_WA))];
    const waTarget=uniqueWAs.length===1?uniqueWAs[0]:DEFAULT_WA;
    document.getElementById("btnCheckoutWA").href=`https://wa.me/${encodeURIComponent(waTarget)}?text=${encodeURIComponent(text)}`;

    document.getElementById('navCartCount').textContent = totalQty;
    document.dispatchEvent(new CustomEvent('dnd:cart-updated',{detail:{count:totalQty,total}}));
  }

  function toggleWishlist(key){
    const list=getStorage(WISH_KEY,[]);
    const i=list.indexOf(key);
    if(i>-1) list.splice(i,1);
    else list.push(key);
    setStorage(WISH_KEY,list);
  }

  // ===== Events =====
  if (searchInput) {
    searchInput.addEventListener("input",()=>{applyFilterSort();renderProduk(false);});
  }

  produkList.addEventListener("click",e=>{
    const t=e.target.closest("[data-detail],[data-add],[data-wish]");
    if(!t)return;
    if(t.dataset.detail!==undefined){
      showDetailByGlobalIndex(Number(t.dataset.detail));
    }else if(t.dataset.add){
      addToCart(decodeURIComponent(t.dataset.add),1);
    }else if(t.dataset.wish){
      toggleWishlist(decodeURIComponent(t.dataset.wish));
      t.classList.toggle('active');
    }
  });

  document.getElementById("cartItems").addEventListener("click",e=>{
    const t=e.target.closest("[data-qtyminus],[data-qtyplus],[data-remove]"); if(!t)return;
    if(t.dataset.qtyminus){changeQty(decodeURIComponent(t.dataset.qtyminus),-1);}
    else if(t.dataset.qtyplus){changeQty(decodeURIComponent(t.dataset.qtyplus),+1);}
    else if(t.dataset.remove){removeFromCart(decodeURIComponent(t.dataset.remove));}
  });
  document.getElementById("btnClearCart").addEventListener("click",()=>clearCart());
  document.getElementById("btnLoadMore").addEventListener("click",()=>{page+=1;renderProduk(true);});

  document.getElementById("modalAddCart").addEventListener("click",()=>{
    const primaryName = document.getElementById("modalAddCart").dataset.primaryVariant;
    if(!primaryName) return;
    addToCart(primaryName,1);
    new bootstrap.Offcanvas('#offcanvasCart').show();
  });

  // ===== Dark mode, nav, sinkron cart =====
  (function initTheme(){
    const saved=localStorage.getItem("dnd_theme")||"dark";
    document.documentElement.setAttribute("data-theme",saved);
    const darkBtn=document.getElementById("floatingDarkBtn");
    const setIcon=()=>{darkBtn.innerHTML=`<i class="fa-solid ${document.documentElement.getAttribute('data-theme')==='dark'?'fa-sun':'fa-moon'}"></i>`;}
    setIcon();
    darkBtn.addEventListener("click",()=>{
      const mode=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";
      document.documentElement.setAttribute("data-theme",mode);
      localStorage.setItem("dnd_theme",mode);
      setIcon();
      const navBtn=document.getElementById('navDarkBtn');
      if(navBtn){ navBtn.innerHTML = `<i class="fa-solid ${mode==='dark'?'fa-sun':'fa-moon'}"></i>`; }
    });
  })();

  // NAVBAR SEARCH OVERLAY
  (function initNavbarSearch(){
    const searchBtns = document.querySelectorAll('[data-nav-search]');
    const searchOverlay = document.getElementById('searchOverlay');

    if(!searchBtns.length || !searchOverlay || !searchInput) return;

    function openSearch(){
      searchOverlay.classList.add('open');
      const produkSection = document.getElementById('listProduk');
      if (produkSection) {
        produkSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
      setTimeout(() => searchInput.focus(), 120);
    }

    function closeSearch(){
      searchOverlay.classList.remove('open');
      searchInput.blur();
    }

    function toggleSearch(){
      if (searchOverlay.classList.contains('open')) closeSearch();
      else openSearch();
    }

    searchBtns.forEach(btn => {
      btn.addEventListener('click', toggleSearch);
    });

    const btnCloseSearch = document.getElementById('btnCloseSearch');
    if (btnCloseSearch) {
      btnCloseSearch.addEventListener('click', closeSearch);
    }

    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape') closeSearch();
    });
  })();

  // Smooth scroll nav
  document.addEventListener('click',(e)=>{
    const a=e.target.closest('a[data-scroll][href^="#"]');
    if(!a) return;
    e.preventDefault();
    const sel=a.getAttribute('href');
    const el=document.querySelector(sel);
    if(el) el.scrollIntoView({behavior:'smooth'});
    const coll=document.getElementById('mainNav');
    if(coll && coll.classList.contains('show')) new bootstrap.Collapse(coll).hide();
  });

  // Active nav on this page
  (function setActiveNav(){
    const path = location.pathname.split('/').pop() || 'index.html';
    document.querySelectorAll('.nav-link').forEach(n=>{
      const href = n.getAttribute('href');
      if(n.hasAttribute('data-scroll') && (path==='index.html' || path==='')) n.classList.add('active');
      else if(href && href.endsWith(path)) n.classList.add('active');
    });
  })();

  (function hookNavbarDark(){
    const btn = document.getElementById('navDarkBtn');
    if(!btn) return;
    const setIcon=()=>{ btn.innerHTML = `<i class="fa-solid ${document.documentElement.getAttribute('data-theme')==='dark'?'fa-sun':'fa-moon'}"></i>`; };
    setIcon();
    btn.addEventListener('click', ()=>{
      const mode=document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark';
      document.documentElement.setAttribute('data-theme',mode);
      localStorage.setItem('dnd_theme',mode);
      setIcon();
      const floatingBtn = document.getElementById('floatingDarkBtn');
      if(floatingBtn) floatingBtn.innerHTML = btn.innerHTML;
    });
  })();

  (function syncCartCountToNav(){
    const navCount = document.getElementById('navCartCount');
    if(!navCount) return;
    document.addEventListener('dnd:cart-updated',(e)=>{
      if(typeof e.detail?.count === 'number') navCount.textContent = e.detail.count;
    });
    const initCart = getStorage(CART_KEY,[]);
    navCount.textContent = initCart.reduce((a,b)=>a+(b.qty||1),0);
  })();

  document.addEventListener('DOMContentLoaded', ()=>{
    setNavOffset();
    loadProdukFromSheet();
    updateCartUI();

    const fy = document.getElementById('footerYear');
    if(fy){ fy.textContent = new Date().getFullYear(); }
  });
  window.addEventListener('load',()=>document.body.classList.add('loaded'));
</script>

</body>
</html>

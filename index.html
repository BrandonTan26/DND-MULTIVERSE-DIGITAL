<!DOCTYPE html>
<html lang="id" data-theme="dark" style="--nav-h: 59px;">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>D&D Multiverse Digital - Price List</title>

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet" />

  <style>
    :root{
      --primary-color:#6366f1;--secondary-color:#8b5cf6;--accent-color:#06b6d4;--success-color:#10b981;--warning-color:#f59e0b;--danger-color:#ef4444;
      --dark-color:#020617;--light-color:#f8fafc;--muted-color:#64748b;
      --bg-page:radial-gradient(circle at top left,#1e293b 0%,#020617 50%,#000000 100%);
      --bg-surface:#020617;--text-main:#e5e7eb;
      --card-shadow:0 8px 24px rgba(15,23,42,.85);
      --card-shadow-hover:0 24px 60px rgba(15,23,42,.95);
      --border-radius:18px;
      --gradient-primary:linear-gradient(135deg,#4f46e5 0%,#22d3ee 50%,#a855f7 100%);
      --gradient-accent:linear-gradient(135deg,#06b6d4 0%,#22c55e 50%);
      --nav-h:64px;
    }
    html[data-theme="light"]{
      --bg-page:linear-gradient(135deg,#e0f2fe 0%,#f5f3ff 50%,#fee2e2 100%);
      --bg-surface:#ffffff;--text-main:#0f172a;--light-color:#f8fafc;--muted-color:#64748b;
      --card-shadow:0 4px 12px rgba(15,23,42,.12);
      --card-shadow-hover:0 18px 40px rgba(15,23,42,.18);
    }
    *{box-sizing:border-box}
    body{
      font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;
      background:var(--bg-page);
      min-height:100vh;
      line-height:1.6;
      color:var(--text-main);
    }
    .container-fluid{
      background:radial-gradient(circle at top,#1e293b 0,transparent 45%),
                 radial-gradient(circle at bottom,#0f172a 0,transparent 50%),
                 var(--bg-surface);
      min-height:100vh;
      margin:0;
      padding:0;
    }

    /* ===== NAVBAR GLASS CYBER ===== */
    .nav-glass{
      position:sticky; top:0; z-index:1100;
      background:rgba(15,23,42,.86);
      backdrop-filter:saturate(1.4) blur(14px);
      border-bottom:1px solid rgba(148,163,184,.4);
    }
    html[data-theme="light"] .nav-glass{
      background:rgba(255,255,255,.86);
      border-color:#e5e7eb;
    }
    .navbar-brand{
      font-weight:900;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size:1.05rem;
      background:var(--gradient-primary);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .navbar-brand span.badge{
      font-size:.65rem;
      letter-spacing:.08em;
      border-radius:999px;
      padding:.25rem .6rem;
      background:rgba(15,23,42,.75);
      color:#e5e7eb;
    }
    html[data-theme="light"] .navbar-brand span.badge{
      background:#eff6ff;
      color:#1f2937;
    }
    .nav-link{
      font-weight:600;
      font-size:.9rem;
      border-radius:999px;
      padding:.4rem .9rem !important;
      color:var(--muted-color) !important;
    }
    .nav-link:hover{
      background:rgba(99,102,241,.16);
      color:#e5e7eb !important;
    }
    html[data-theme="light"] .nav-link:hover{
      color:#111827 !important;
      background:rgba(99,102,241,.08);
    }
    .nav-link.active{
      color:#0b1120 !important;
      background:var(--gradient-primary);
    }
    html[data-theme="dark"] .nav-link.active{
      color:#f9fafb !important;
    }

    .navbar-toggler{
      border-radius:12px;
      border:1px solid rgba(148,163,184,.7);
      padding:.25rem .4rem;
      background:rgba(15,23,42,.6);
    }
    html[data-theme="light"] .navbar-toggler{
      background:rgba(255,255,255,.7);
      border-color:#d4d4d8;
    }
    .navbar-toggler:focus{box-shadow:none;}

    .navbar-toggler-icon{
      width:1.8rem;
      height:1.8rem;
      background-repeat:no-repeat;
      background-position:center;
      background-size:100%;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath stroke='%23e5e7eb' stroke-width='2' stroke-linecap='round' d='M4 6h16M4 12h16M4 18h16'/%3E%3C/svg%3E");
    }
    html[data-theme="light"] .navbar-toggler-icon{
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath stroke='%2310203b' stroke-width='2' stroke-linecap='round' d='M4 6h16M4 12h16M4 18h16'/%3E%3C/svg%3E");
    }

    .nav-icon-btn{
      width:42px;height:42px;
      display:inline-flex;align-items:center;justify-content:center;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.7);
      background:radial-gradient(circle at top,#0f172a,#020617);
      color:#e5e7eb;
      position:relative;
    }
    html[data-theme="light"] .nav-icon-btn{
      background:#f9fafb;
      color:#111827;
      border-color:#e5e7eb;
    }
    .nav-cart-count{
      position:absolute;top:-5px;right:-5px;
      min-width:20px;height:20px;
      border-radius:999px;
      background:#22c55e;
      color:#f9fafb;
      font-size:.75rem;
      font-weight:800;
      display:flex;align-items:center;justify-content:center;
      box-shadow:0 0 0 2px #020617;
    }
    html[data-theme="light"] .nav-cart-count{
      box-shadow:0 0 0 2px #ffffff;
    }

    /* === SEARCH OVERLAY NAVBAR === */
    .search-overlay{
      position:fixed;
      top:var(--nav-h);
      left:0; right:0;
      z-index:1200;
      padding:.5rem 0;
      transform:translateY(-100%);
      opacity:0;
      pointer-events:none;
      transition:transform .25s ease, opacity .25s ease;
      background:rgba(15,23,42,.96);
      border-bottom:1px solid rgba(148,163,184,.4);
    }
    html[data-theme="light"] .search-overlay{
      background:rgba(255,255,255,.96);
      border-color:#e5e7eb;
    }
    .search-overlay.open{
      transform:translateY(0);
      opacity:1;
      pointer-events:auto;
    }
    .search-overlay-inner{
      display:flex;align-items:center;gap:.5rem;
      border-radius:999px;
      padding:.45rem .85rem;
      background:radial-gradient(circle at top left,rgba(129,140,248,.22),rgba(15,23,42,1));
      box-shadow:0 18px 45px rgba(15,23,42,.85);
    }
    html[data-theme="light"] .search-overlay-inner{
      background:#f9fafb;
      box-shadow:0 18px 45px rgba(15,23,42,.18);
    }
    .search-overlay .overlay-icon{color:#9ca3af;}
    .search-overlay .search-input{
      border:none;
      background:transparent;
      padding-left:0;
      box-shadow:none;
      color:var(--text-main);
    }
    .search-overlay .search-input:focus{outline:none;box-shadow:none;}

    /* ===== HERO CYBERPUNK SPACE ===== */
    .hero-section{
      padding:2.8rem 0 2.2rem;
      background:
        radial-gradient(circle at 10% -10%,rgba(129,140,248,.38),transparent 55%),
        radial-gradient(circle at 90% 110%,rgba(52,211,153,.28),transparent 55%);
      border-bottom:1px solid rgba(148,163,184,.4);
    }
    html[data-theme="light"] .hero-section{
      background:
        radial-gradient(circle at 10% -10%,rgba(129,140,248,.25),transparent 55%),
        radial-gradient(circle at 90% 110%,rgba(52,211,153,.2),transparent 55%);
      border-color:#e5e7eb;
    }
    .hero-badge{
      display:inline-flex;align-items:center;gap:.4rem;
      padding:.3rem .75rem;
      border-radius:999px;
      background:rgba(15,23,42,.7);
      border:1px solid rgba(148,163,184,.6);
      font-size:.78rem;
      color:#e5e7eb;
    }
    html[data-theme="light"] .hero-badge{
      background:#eef2ff;
      color:#1e293b;
      border-color:#c7d2fe;
    }
    .hero-title{
      font-size:2.3rem;
      font-weight:900;
      margin:.9rem 0 .5rem;
      letter-spacing:.04em;
      text-transform:uppercase;
      line-height:1.2;
    }
    @media(min-width:768px){
      .hero-title{font-size:2.7rem;}
    }
    .hero-title span.gradient{
      background:var(--gradient-primary);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .hero-subtitle{
      max-width:36rem;
      font-size:.98rem;
      color:var(--muted-color);
    }
    .hero-actions{margin-top:1.2rem;display:flex;flex-wrap:wrap;gap:.75rem;}
    .hero-pill{
      display:inline-flex;align-items:center;gap:.35rem;
      font-size:.8rem;
      color:var(--muted-color);
    }
    .hero-stat-card{
      border-radius:18px;
      padding:.9rem 1rem;
      background:radial-gradient(circle at top left,rgba(129,140,248,.24),rgba(15,23,42,1));
      border:1px solid rgba(148,163,184,.5);
      text-align:left;
      box-shadow:0 18px 45px rgba(15,23,42,.85);
    }
    html[data-theme="light"] .hero-stat-card{
      background:#ffffff;
      border-color:#e5e7eb;
      box-shadow:0 14px 35px rgba(15,23,42,.15);
    }
    .hero-stat-value{
      font-weight:800;font-size:1.1rem;
    }
    .hero-stat-label{
      font-size:.8rem;color:var(--muted-color);
    }

    /* ===== SECTION TITLES ===== */
    .section-title{
      font-size:1.6rem;
      font-weight:800;
      text-align:center;
      margin-bottom:.3rem;
    }
    .section-subtitle{
      text-align:center;
      font-size:.9rem;
      color:var(--muted-color);
      margin-bottom:1.3rem;
    }

    /* ===== STEPS (CARA ORDER) ===== */
    .steps-section{
      padding:2.1rem 0 1.8rem;
      background:radial-gradient(circle at top,rgba(15,23,42,.65),rgba(15,23,42,1));
      border-bottom:1px solid rgba(30,64,175,.6);
    }
    html[data-theme="light"] .steps-section{
      background:#f9fafb;
      border-color:#e5e7eb;
    }
    .step-item{display:flex;gap:.75rem;align-items:flex-start;}
    .step-badge{
      flex-shrink:0;
      width:30px;height:30px;border-radius:999px;
      display:flex;align-items:center;justify-content:center;
      font-weight:700;font-size:.82rem;
      background:rgba(79,70,229,.3);
      color:#c7d2fe;
    }
    html[data-theme="light"] .step-badge{
      background:rgba(79,70,229,.12);
      color:#4f46e5;
    }
    .step-title{font-weight:600;font-size:.95rem;margin-bottom:.15rem;}
    .step-text{font-size:.87rem;color:var(--muted-color);}

    /* ===== PRODUCTS ===== */
    .products-section{
      padding:2.1rem 0 1.8rem;
      background:radial-gradient(circle at top,#020617,#020617);
    }
    html[data-theme="light"] .products-section{
      background:#f9fafb;
    }
    .product-card{
      background:radial-gradient(circle at top left,rgba(129,140,248,.22),rgba(15,23,42,1));
      border-radius:var(--border-radius);
      box-shadow:var(--card-shadow);
      border:1px solid rgba(148,163,184,.55);
      transition:all .35s cubic-bezier(.25,.8,.25,1);
      overflow:hidden;
      height:100%;
      position:relative;
    }
    html[data-theme="light"] .product-card{
      background:#ffffff;
      border-color:#e5e7eb;
    }
    .product-card::before{
      content:"";
      position:absolute;top:0;left:-40%;
      width:40%;height:100%;
      background:linear-gradient(120deg,rgba(244,244,245,.0),rgba(244,244,245,.24),rgba(244,244,245,0));
      transform:skewX(-18deg) translateX(-120%);
      transition:transform .6s ease;
    }
    .product-card:hover{
      transform:translateY(-6px) translateZ(0);
      box-shadow:var(--card-shadow-hover);
    }
    .product-card:hover::before{
      transform:skewX(-18deg) translateX(260%);
    }

    .product-icon{
      width:64px;height:64px;
      margin:0 auto 1rem;
      display:flex;align-items:center;justify-content:center;
      border-radius:18px;
      background:radial-gradient(circle at 20% 0%,rgba(248,250,252,.95),rgba(226,232,240,.9));
      border:1px solid rgba(148,163,184,.6);
    }
    html[data-theme="light"] .product-icon{
      background:#f9fafb;
      border-color:#e5e7eb;
    }
    .product-icon img{
      width:38px;height:38px;object-fit:contain;
    }
    .product-title{
      font-size:.98rem;
      font-weight:700;
      margin-bottom:.35rem;
      min-height:2.6em;
    }
    .price-wrap{margin-bottom:.6rem;}
    .price{font-size:1.05rem;font-weight:800;color:#22c55e;margin-right:.4rem;}
    .price-old{font-size:.9rem;color:#94a3b8;text-decoration:line-through;}
    html[data-theme="light"] .price-old{color:#6b7280;}

    .category-badge{
      position:absolute;top:.8rem;right:.8rem;
      background:rgba(15,23,42,.85);
      color:#e5e7eb;
      padding:.2rem .55rem;
      border-radius:999px;
      font-size:.7rem;
      font-weight:700;
      display:inline-flex;align-items:center;gap:.3rem;
      border:1px solid rgba(148,163,184,.7);
    }
    html[data-theme="light"] .category-badge{
      background:#eef2ff;
      color:#1e293b;
      border-color:#c7d2fe;
    }

    .wishlist-btn{
      position:absolute;top:.6rem;left:.6rem;
      width:34px;height:34px;border-radius:999px;
      display:flex;align-items:center;justify-content:center;
      border:1px solid rgba(148,163,184,.7);
      background:rgba(15,23,42,.8);
      color:#9ca3af;
      cursor:pointer;
      z-index:2;
    }
    .wishlist-btn.active{color:#f97373;}
    html[data-theme="light"] .wishlist-btn{
      background:#ffffff;
      color:#6b7280;
    }

    .product-actions{gap:.5rem;justify-content:center;}
    .icon-btn{
      width:42px;height:42px;
      border-radius:999px;
      display:inline-flex;align-items:center;justify-content:center;
      border:1px solid rgba(148,163,184,.7);
      background:rgba(15,23,42,.9);
      color:#e5e7eb;
      transition:.2s;
    }
    html[data-theme="light"] .icon-btn{
      background:#f9fafb;
      color:#111827;
      border-color:#e5e7eb;
    }
    .icon-btn:hover{transform:translateY(-1px);}
    .icon-btn:disabled{opacity:.5;cursor:not-allowed;}

    .btn-add.icon-btn{
      background:rgba(52,211,153,.12);
      border-color:#22c55e;
      color:#bbf7d0;
    }
    html[data-theme="light"] .btn-add.icon-btn{
      background:#ecfdf3;
      color:#166534;
    }
    .quick-wa.icon-btn{
      background:rgba(34,197,94,.92);
      border-color:#22c55e;
      color:#f9fafb;
    }

    .badge-stock{
      position:absolute;
      bottom:.9rem;right:.9rem;
      border-radius:999px;
      padding:.12rem .55rem;
      font-size:.72rem;
    }

    .empty-state{
      text-align:center;
      padding:2.5rem 1rem;
      color:var(--muted-color);
    }
    .empty-state i{
      font-size:2.8rem;
      margin-bottom:.8rem;
      opacity:.65;
    }
    .loading{
      display:flex;justify-content:center;align-items:center;height:200px;
    }
    .spinner{
      width:40px;height:40px;
      border:4px solid rgba(148,163,184,.4);
      border-top:4px solid #6366f1;
      border-radius:50%;
      animation:spin 1s linear infinite;
    }
    @keyframes spin{to{transform:rotate(360deg);}}

    /* ===== BENEFITS ===== */
    .benefit-section{
      padding:2.2rem 0 1.7rem;
      background:radial-gradient(circle at top,#020617,#020617);
      border-top:1px solid rgba(30,64,175,.6);
    }
    html[data-theme="light"] .benefit-section{
      background:#ffffff;
      border-color:#e5e7eb;
    }
    .benefit-card{
      border-radius:18px;
      padding:1.05rem 1.05rem;
      background:radial-gradient(circle at top left,rgba(129,140,248,.18),rgba(15,23,42,1));
      border:1px solid rgba(148,163,184,.6);
      height:100%;
      box-shadow:0 16px 45px rgba(15,23,42,.9);
    }
    html[data-theme="light"] .benefit-card{
      background:#f9fafb;
      border-color:#e5e7eb;
      box-shadow:0 14px 32px rgba(15,23,42,.12);
    }
    .benefit-icon-wrap{
      width:40px;height:40px;
      border-radius:999px;
      display:flex;align-items:center;justify-content:center;
      background:rgba(129,140,248,.28);
      color:#e0e7ff;
      margin-bottom:.55rem;
    }
    html[data-theme="light"] .benefit-icon-wrap{
      background:rgba(129,140,248,.15);
      color:#4f46e5;
    }
    .benefit-title{font-weight:700;font-size:.97rem;margin-bottom:.25rem;}
    .benefit-text{font-size:.87rem;color:var(--muted-color);}

    /* ===== TESTIMONI ===== */
    .testimonial-section{
      padding:2.2rem 0 1.8rem;
      background:radial-gradient(circle at top,#020617,#020617);
    }
    html[data-theme="light"] .testimonial-section{
      background:#f9fafb;
    }
    .testimonial-card{
      border-radius:18px;
      padding:1rem 1rem .95rem;
      border:1px solid rgba(148,163,184,.6);
      background:radial-gradient(circle at top left,rgba(129,140,248,.22),rgba(15,23,42,1));
      height:100%;
      box-shadow:0 16px 40px rgba(15,23,42,.9);
    }
    html[data-theme="light"] .testimonial-card{
      background:#ffffff;
      border-color:#e5e7eb;
      box-shadow:0 14px 32px rgba(15,23,42,.12);
    }
    .testimonial-name{font-weight:600;font-size:.95rem;}
    .testimonial-meta{font-size:.78rem;color:var(--muted-color);}
    .testimonial-text{font-size:.88rem;margin-top:.3rem;}

    /* ===== FAQ ===== */
    .faq-section{
      padding:2.3rem 0 1.8rem;
      background:radial-gradient(circle at top,#020617,#020617);
    }
    html[data-theme="light"] .faq-section{
      background:#f3f4f6;
    }
    .faq-accordion .accordion-item{
      border-radius:14px;
      margin-bottom:.65rem;
      overflow:hidden;
      border:1px solid rgba(148,163,184,.6);
      background:rgba(15,23,42,1);
    }
    html[data-theme="light"] .faq-accordion .accordion-item{
      background:#ffffff;
      border-color:#e5e7eb;
    }
    .faq-accordion .accordion-button{
      font-weight:600;
      font-size:.92rem;
      padding:.65rem .9rem;
      background:rgba(15,23,42,1);
      color:#e5e7eb;
    }
    .faq-accordion .accordion-button:not(.collapsed){
      background:rgba(30,64,175,.8);
      color:#e5e7eb;
    }
    html[data-theme="light"] .faq-accordion .accordion-button{
      background:#f9fafb;
      color:#0f172a;
    }
    .faq-accordion .accordion-body{
      font-size:.88rem;
      padding:.7rem .9rem .8rem;
      background:rgba(15,23,42,1);
      color:var(--muted-color);
    }
    html[data-theme="light"] .faq-accordion .accordion-body{
      background:#ffffff;
    }

    /* ===== CONTACT / FOOTER ===== */
    .contact-section{
      padding:2.1rem 0 1.5rem;
      background:radial-gradient(circle at top,#020617,#020617);
      border-top:1px solid rgba(30,64,175,.6);
    }
    html[data-theme="light"] .contact-section{
      background:#ffffff;
      border-color:#e5e7eb;
    }
    .contact-pill{
      display:inline-flex;align-items:center;gap:.4rem;
      padding:.25rem .7rem;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.7);
      font-size:.78rem;
      color:var(--muted-color);
    }
    .contact-link{
      display:inline-flex;align-items:center;gap:.45rem;
      font-size:.9rem;
      text-decoration:none;
      color:var(--text-main);
    }
    .contact-link:hover{text-decoration:none;opacity:.85;}
    .footer-mini{
      border-top:1px solid rgba(148,163,184,.5);
      margin-top:1.2rem;
      padding-top:.65rem;
      font-size:.78rem;
      color:var(--muted-color);
    }

    /* ===== MODAL & OFFCANVAS ===== */
    .modal-content{
      border-radius:var(--border-radius);
      border:none;
      background:radial-gradient(circle at top left,rgba(129,140,248,.22),rgba(15,23,42,1));
      color:var(--text-main);
      box-shadow:0 24px 55px rgba(15,23,42,.95);
    }
    html[data-theme="light"] .modal-content{
      background:#ffffff;
      box-shadow:0 24px 55px rgba(15,23,42,.18);
    }
    .modal-header{
      background:var(--gradient-primary);
      color:#f9fafb;
      border-radius:var(--border-radius) var(--border-radius) 0 0;
      padding:1rem 1.1rem;
    }
    .modal-body{padding:1rem;}
    .modal-footer{padding:.85rem 1rem;border-top:1px solid rgba(148,163,184,.5);}
    .btn-close{filter:brightness(0) invert(1);}

    .offcanvas{
      background:radial-gradient(circle at top left,rgba(15,23,42,1),rgba(15,23,42,.98));
      color:#e5e7eb;
    }
    html[data-theme="light"] .offcanvas{
      background:#ffffff;
      color:#0f172a;
    }
    .offcanvas-header{border-bottom:1px solid rgba(148,163,184,.5);}
    .offcanvas-body{padding:1rem;}

    /* ===== FLOATING BUTTONS ===== */
    .floating-cart{
      position:fixed;right:16px;bottom:16px;z-index:900;
      border:none;
      border-radius:999px;
      padding:.85rem 1.1rem;
      display:flex;align-items:center;gap:.55rem;
      background:var(--gradient-primary);
      color:#f9fafb;
      box-shadow:0 20px 50px rgba(15,23,42,.95);
      font-weight:800;
      font-size:.9rem;
    }
    .floating-cart .count{
      background:#0f172a;
      color:#e5e7eb;
      border-radius:999px;
      padding:.05rem .55rem;
      min-width:26px;
      text-align:center;
      font-size:.78rem;
    }

    .floating-dark{
      position:fixed;left:16px;bottom:16px;z-index:900;
      width:46px;height:46px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.7);
      background:radial-gradient(circle at top,#0f172a,#020617);
      display:flex;align-items:center;justify-content:center;
      box-shadow:0 16px 36px rgba(15,23,42,.9);
      color:#e5e7eb;
    }
    html[data-theme="light"] .floating-dark{
      background:#ffffff;
      color:#111827;
      border-color:#e5e7eb;
      box-shadow:0 12px 28px rgba(15,23,42,.16);
    }

    /* ===== ANIM ===== */
    .fade-in{animation:fadeIn .55s ease-out forwards;}
    @keyframes fadeIn{from{opacity:0;transform:translateY(14px);}to{opacity:1;transform:translateY(0);} }

    .load-more-wrap{text-align:center;margin-top:1rem;}

    .btn:focus,.form-control:focus,.form-select:focus{
      outline:2px solid #6366f1;
      outline-offset:2px;
      box-shadow:none;
    }

    @media (max-width:576px){
      .hero-title{font-size:1.9rem;}
      #produkModal .modal-dialog{margin:0;}
      #produkModal .modal-content{border-radius:18px;}
      .search-overlay-inner{border-radius:16px;}
      .hero-section{padding-top:2.1rem;}
      .modal-header{
        position:sticky;top:0;z-index:2;
      }
      .modal-footer{
        display:flex;flex-wrap:nowrap;gap:.5rem;justify-content:space-between;
      }
      .modal-footer .btn{flex:1 1 0;min-width:0;white-space:nowrap;}
    }
    @media (max-width:400px){
      #produkModal .modal-footer .btn i{margin-right:0;}
      #produkModal .modal-footer .btn span{display:none;}
    }
  </style>
</head>
<body class="loaded">
  <div class="container-fluid">
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg nav-glass" id="mainNavbar">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center gap-2" href="#top">
          <span>D&D MULTIVERSE DIGITAL</span>
          <span class="badge">A DIGITAL CREATIVE STUDIO</span>
        </a>
        <div class="d-flex align-items-center d-lg-none ms-auto gap-1">
          <button class="nav-icon-btn d-inline-flex" type="button" data-nav-search>
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
        <div class="collapse navbar-collapse" id="mainNav">
          <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-1">
            <li class="nav-item"><a class="nav-link active" data-scroll href="#produk">Produk</a></li>
            <li class="nav-item"><a class="nav-link" data-scroll href="#keunggulan">Keunggulan</a></li>
            <li class="nav-item"><a class="nav-link" data-scroll href="#kontak">Kontak</a></li>
          </ul>
          <div class="d-flex align-items-center gap-2 ms-lg-3">
            <button class="nav-icon-btn position-relative d-none d-lg-inline-flex" title="Cari Produk" data-nav-search>
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>
            <button id="navDarkBtn" class="nav-icon-btn position-relative" title="Toggle Tema">
              <i class="fa-solid fa-sun"></i>
            </button>
            <button class="nav-icon-btn position-relative" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasCart">
              <i class="fa-solid fa-bag-shopping"></i>
              <span id="navCartCount" class="nav-cart-count">0</span>
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- SEARCH OVERLAY -->
    <div id="searchOverlay" class="search-overlay">
      <div class="container">
        <div class="search-overlay-inner">
          <i class="fas fa-search overlay-icon"></i>
          <input type="text" id="searchInput" class="form-control search-input" placeholder="Cari layanan digital (Netflix, YouTube, Canva, dll.)..." />
          <button class="btn btn-link text-decoration-none text-light" id="btnCloseSearch" aria-label="Tutup">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- HERO -->
    <section class="hero-section" id="top">
      <div class="container">
        <div class="row g-4 align-items-center">
          <div class="col-md-7">
            <div class="hero-badge">
              <i class="fa-solid fa-shield-halved"></i>
              <span>Portal resmi pengelolaan langganan digital</span>
            </div>
            <h1 class="hero-title">
              Layanan Digital Premium<br class="d-none d-md-block" />
              <span class="gradient">dalam Satu Multiverse.</span>
            </h1>
            <p class="hero-subtitle">
              D&D Multiverse Digital membantu mengelola akses YouTube Premium, Netflix, Spotify, Canva Pro, CapCut,
              Google One, hingga tools kreatif lainnya dengan harga terukur dan dokumentasi yang rapi.
            </p>
            <div class="hero-actions">
              <a href="#listProduk" data-scroll class="btn btn-primary px-4 py-2">
                <i class="fa-solid fa-tags me-2"></i> Lihat Katalog Layanan
              </a>
              <a href="https://wa.me/6287809236556" target="_blank" class="btn btn-outline-success px-4 py-2">
                <i class="fa-brands fa-whatsapp me-2"></i> Hubungi Admin
              </a>
            </div>
            <div class="d-flex flex-wrap align-items-center gap-3 mt-3">
              <div class="hero-pill">
                <i class="fa-solid fa-bolt"></i>
                <span>Estimasi pengerjaan 1–10 menit (jam operasional)</span>
              </div>
              <div class="hero-pill">
                <i class="fa-solid fa-circle-check"></i>
                <span>Garansi masa pakai sesuai ketentuan D&D Multiverse Digital</span>
              </div>
            </div>
          </div>
          <div class="col-md-5">
            <div class="row g-3">
              <div class="col-6">
                <div class="hero-stat-card">
                  <div class="hero-stat-value">1.000+</div>
                  <div class="hero-stat-label">Order digital terselesaikan</div>
                </div>
              </div>
              <div class="col-6">
                <div class="hero-stat-card">
                  <div class="hero-stat-value">4.9/5</div>
                  <div class="hero-stat-label">Rerata kepuasan klien</div>
                </div>
              </div>
              <div class="col-12">
                <div class="hero-stat-card d-flex align-items-center gap-3">
                  <div class="benefit-icon-wrap mb-0">
                    <i class="fa-solid fa-qrcode"></i>
                  </div>
                  <div>
                    <div class="hero-stat-label mb-1">Metode Pembayaran</div>
                    <div class="hero-stat-value">QRIS • Transfer • E-Wallet*</div>
                    <div class="small text-muted mt-1">
                      *Menyesuaikan kebijakan operasional D&D Multiverse Digital yang berlaku.
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CARA ORDER -->
    <section class="steps-section" id="cara-order">
      <div class="container">
        <h2 class="section-title">Cara Order di D&D Multiverse Digital</h2>
        <p class="section-subtitle">Panduan singkat untuk pengguna baru sebelum memesan layanan digital.</p>
        <div class="row g-3 g-md-4 mt-2">
          <div class="col-md-6">
            <div class="step-item">
              <div class="step-badge">1</div>
              <div>
                <div class="step-title">Pilih layanan & varian</div>
                <p class="step-text">
                  Telusuri daftar layanan di bawah, tekan <strong>Detail</strong> untuk melihat varian durasi dan pilih
                  paket yang paling sesuai dengan pola penggunaan Anda.
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="step-item">
              <div class="step-badge">2</div>
              <div>
                <div class="step-title">Tambahkan ke Keranjang</div>
                <p class="step-text">
                  Tekan <strong>Keranjang</strong> pada varian yang diinginkan, lalu tinjau kembali ringkasan order melalui
                  ikon keranjang di kanan bawah layar.
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="step-item">
              <div class="step-badge">3</div>
              <div>
                <div class="step-title">Checkout via WhatsApp</div>
                <p class="step-text">
                  Klik <strong>Checkout via WhatsApp</strong>. Format pesanan akan tersusun otomatis sehingga Anda tinggal
                  mengirimkan ke admin tanpa perlu mengetik ulang.
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="step-item">
              <div class="step-badge">4</div>
              <div>
                <div class="step-title">Lakukan pembayaran & tunggu proses</div>
                <p class="step-text">
                  Lakukan pembayaran sesuai instruksi yang dikirim admin. Setelah itu, layanan akan diproses dan akses akun
                  dikirim melalui WhatsApp beserta catatan teknis singkat.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PRODUK -->
    <section class="products-section" id="produk">
      <div class="container" id="listProduk">
        <h2 class="section-title">Katalog Layanan Digital</h2>
        <p class="section-subtitle">
          Pilih paket langganan aplikasi premium yang relevan dengan kebutuhan kerja, hiburan, dan produktivitas Anda.
        </p>

        <div class="row g-3" id="produk-list">
          <div class="col-12">
            <div class="loading">
              <div class="spinner"></div>
            </div>
          </div>
        </div>

        <div class="load-more-wrap">
          <button id="btnLoadMore" class="btn btn-outline-primary px-4 py-2 mt-2">
            <i class="fa-solid fa-rotate"></i> Muat Lebih
          </button>
        </div>
      </div>
    </section>

    <!-- KEUNGGULAN -->
    <section class="benefit-section" id="keunggulan">
      <div class="container">
        <h2 class="section-title">Mengapa D&D Multiverse Digital?</h2>
        <p class="section-subtitle">
          Bukan hanya harga bersahabat, namun alur kerja terdokumentasi, jelas, dan mudah dipahami bahkan oleh pengguna baru.
        </p>
        <div class="row g-3 g-md-4 mt-2">
          <div class="col-md-3 col-sm-6">
            <div class="benefit-card">
              <div class="benefit-icon-wrap">
                <i class="fa-solid fa-shield-heart"></i>
              </div>
              <div class="benefit-title">Terstruktur & Terpercaya</div>
              <p class="benefit-text">
                Setiap order dicatat rapi sehingga mudah ditelusuri. Ketentuan layanan dan garansi disampaikan secara
                tertulis, bukan hanya lewat chat.
              </p>
            </div>
          </div>
          <div class="col-md-3 col-sm-6">
            <div class="benefit-card">
              <div class="benefit-icon-wrap">
                <i class="fa-solid fa-bolt"></i>
              </div>
              <div class="benefit-title">Proses Cepat & Terukur</div>
              <p class="benefit-text">
                Estimasi pengerjaan 1–10 menit pada jam operasional. Jika ada antrian atau kendala teknis, admin akan
                menginformasikan estimasi terbaru.
              </p>
            </div>
          </div>
          <div class="col-md-3 col-sm-6">
            <div class="benefit-card">
              <div class="benefit-icon-wrap">
                <i class="fa-solid fa-arrows-rotate"></i>
              </div>
              <div class="benefit-title">Garansi Masa Pakai</div>
              <p class="benefit-text">
                Jika akun bermasalah di masa garansi dan sesuai ketentuan, akan dibantu penanganan atau penggantian
                berdasarkan kebijakan yang berlaku.
              </p>
            </div>
          </div>
          <div class="col-md-3 col-sm-6">
            <div class="benefit-card">
              <div class="benefit-icon-wrap">
                <i class="fa-solid fa-headset"></i>
              </div>
              <div class="benefit-title">Pendampingan Responsif</div>
              <p class="benefit-text">
                Admin siap menjelaskan perbedaan paket, pola penggunaan, hingga tips teknis ringan setelah layanan aktif
                sehingga pengguna tidak berjalan sendiri.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- TESTIMONI -->
    <section class="testimonial-section" id="testimoni">
      <div class="container">
        <h2 class="section-title">Ulasan Singkat Pelanggan</h2>
        <p class="section-subtitle">
          Ringkasan pengalaman beberapa klien yang telah menggunakan layanan D&D Multiverse Digital.
        </p>
        <div class="row g-3 g-md-4 mt-2">
          <div class="col-md-4">
            <div class="testimonial-card">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <div class="testimonial-name">D*** – Jakarta</div>
                  <div class="testimonial-meta">YouTube Premium 3 Bulan</div>
                </div>
                <div class="text-warning">
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star-half-stroke"></i>
                </div>
              </div>
              <p class="testimonial-text">
                “Prosesnya jelas, akses aktif cepat, dan semua ketentuan ditulis dengan rapi. Enak untuk dicek ulang kalau
                lupa.”
              </p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="testimonial-card">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <div class="testimonial-name">M*** – Bandung</div>
                  <div class="testimonial-meta">Canva Pro + CapCut Pro</div>
                </div>
                <div class="text-warning">
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                </div>
              </div>
              <p class="testimonial-text">
                “Sangat membantu kerja desain dan produksi konten harian. Biaya masih logis, apalagi untuk pekerja lepas dan
                UMKM.”
              </p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="testimonial-card">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <div class="testimonial-name">L*** – Surabaya</div>
                  <div class="testimonial-meta">Netflix & Spotify Premium</div>
                </div>
                <div class="text-warning">
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                  <i class="fa-solid fa-star"></i>
                </div>
              </div>
              <p class="testimonial-text">
                “Sudah beberapa kali perpanjang. Komunikasi tertata, penjelasan teknis mudah dipahami, dan setiap kendala
                direspon dengan tenang.”
              </p>
            </div>
          </div>
        </div>
        <p class="small text-muted mt-3">
          *Ringkasan ulasan diambil dari beberapa pelanggan. Bukti transaksi dan riwayat pemesanan dapat diminta langsung
          kepada admin apabila diperlukan.
        </p>
      </div>
    </section>

    <!-- FAQ -->
    <section class="faq-section" id="faq">
      <div class="container">
        <h2 class="section-title">Pertanyaan yang Sering Diajukan</h2>
        <p class="section-subtitle">Beberapa poin berikut dapat membantu menjawab keraguan sebelum melakukan pemesanan.</p>
        <div class="row g-4 mt-2">
          <div class="col-md-7">
            <div class="accordion faq-accordion" id="faqAccordion">
              <div class="accordion-item">
                <h2 class="accordion-header" id="faqOneHeading">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqOne">
                    Berapa lama estimasi proses order?
                  </button>
                </h2>
                <div id="faqOne" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Estimasi proses normal berada di kisaran <strong>1–10 menit</strong> pada jam operasional. Jika sedang
                    padat atau terdapat kendala teknis, admin akan menyampaikan estimasi terbaru secara langsung.
                  </div>
                </div>
              </div>
              <div class="accordion-item">
                <h2 class="accordion-header" id="faqTwoHeading">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqTwo">
                    Apa yang harus dilakukan jika akun bermasalah di tengah masa langganan?
                  </button>
                </h2>
                <div id="faqTwo" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Silakan segera menghubungi admin dan sertakan bukti order. Selama masih berada dalam masa garansi dan
                    sesuai ketentuan, D&D Multiverse Digital akan membantu proses penanganan atau penggantian sesuai
                    kebijakan.
                  </div>
                </div>
              </div>
              <div class="accordion-item">
                <h2 class="accordion-header" id="faqThreeHeading">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqThree">
                    Metode pembayaran apa saja yang tersedia?
                  </button>
                </h2>
                <div id="faqThree" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Saat ini pembayaran dapat dilakukan melalui <strong>QRIS</strong> dan metode lain yang diinformasikan
                    admin (seperti transfer bank atau e-wallet tertentu). Detail tujuan pembayaran akan dikirim setelah Anda
                    melakukan checkout via WhatsApp.
                  </div>
                </div>
              </div>
              <div class="accordion-item">
                <h2 class="accordion-header" id="faqFourHeading">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqFour">
                    Apakah akun dapat digunakan di banyak perangkat?
                  </button>
                </h2>
                <div id="faqFour" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Setiap platform memiliki aturan pemakaian yang berbeda. Admin akan menjelaskan secara terbuka apakah akun
                    dapat digunakan multi-device, hanya satu perangkat, atau memiliki batasan login tertentu sebelum Anda
                    melakukan pembayaran.
                  </div>
                </div>
              </div>
              <div class="accordion-item">
                <h2 class="accordion-header" id="faqFiveHeading">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqFive">
                    Apakah layanan ini mengikuti kebijakan platform resmi?
                  </button>
                </h2>
                <div id="faqFive" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    D&D Multiverse Digital berupaya mengikuti ketentuan penggunaan dari masing-masing platform. Jenis akun
                    (sharing, personal, family, dan sebagainya) akan dijelaskan secara rinci oleh admin sesuai produk yang
                    dipilih.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-5">
            <div class="benefit-card">
              <div class="benefit-icon-wrap mb-2">
                <i class="fa-solid fa-circle-question"></i>
              </div>
              <div class="benefit-title mb-1">Masih ada hal yang ingin ditanyakan?</div>
              <p class="benefit-text mb-3">
                Jika pertanyaan Anda belum terjawab, silakan hubungi admin melalui WhatsApp. Jelaskan kebutuhan Anda, dan
                admin akan membantu memilih paket yang paling relevan.
              </p>
              <a href="https://wa.me/6287809236556?text=Halo%20admin%2C%20saya%20ingin%20konsultasi%20terlebih%20dahulu%20sebelum%20order%20layanan%20digital."
                 target="_blank" class="btn btn-success w-100">
                <i class="fa-brands fa-whatsapp me-2"></i> Tanya Admin Sekarang
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- KONTAK -->
    <section class="contact-section" id="kontak">
      <div class="container">
        <div class="row g-3 align-items-start">
          <div class="col-md-5">
            <span class="contact-pill mb-2">
              <i class="fa-solid fa-building"></i>
              <span>D&D Multiverse Digital</span>
            </span>
            <h3 class="mt-2 mb-2" style="font-size:1.35rem;font-weight:700;">
              Hubungi D&D Multiverse Digital
            </h3>
            <p class="mb-2" style="font-size:.9rem;color:var(--muted-color);">
              Simpan kontak di bawah untuk informasi promo terbaru, pembaruan layanan, dan panduan penggunaan akun.
            </p>
            <ul class="list-unstyled small mb-0">
              <li>Jam operasional: <strong>08.00 – 23.00 WITA</strong></li>
              <li>Di luar jam tersebut, respons dapat sedikit lebih lambat.</li>
            </ul>
          </div>
          <div class="col-md-7">
            <div class="row g-2">
              <div class="col-sm-6">
                <a href="https://wa.me/6287809236556" target="_blank" class="contact-link">
                  <i class="fa-brands fa-whatsapp text-success"></i>
                  <div>
                    <div>WhatsApp Admin</div>
                    <div class="small text-muted">
                      Konsultasi layanan, cek harga, dan konfirmasi pembayaran.
                    </div>
                  </div>
                </a>
              </div>
              <!-- Hanya WhatsApp admin, channel lain dihapus sesuai permintaan -->
            </div>
          </div>
        </div>
        <div class="footer-mini mt-3">
          <div class="d-flex flex-wrap justify-content-between gap-2">
            <span>© <span id="footerYear">2025</span> D&D MULTIVERSE DIGITAL — A Digital Creative Studio.</span>
            <span>Crafted with vision by Brandon Tan.</span>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- MODAL DETAIL PRODUK -->
  <div class="modal fade" id="produkModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content" id="produkModalContent">
        <div class="modal-header">
          <h5 class="modal-title">
            <i class="fas fa-info-circle me-2"></i> Detail Layanan
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Tutup"></button>
        </div>
        <div class="modal-body" id="modalBody"></div>
        <div class="modal-footer">
          <button class="btn btn-outline-primary" id="modalAddCart">
            <i class="fa-solid fa-cart-plus me-2"></i><span>Keranjang</span>
          </button>
          <a href="#" class="btn btn-success" id="modalPesanBtn" target="_blank">
            <i class="fab fa-whatsapp me-2"></i><span>Pesan Sekarang</span>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- OFFCANVAS CART -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasCart">
    <div class="offcanvas-header">
      <button class="btn btn-link text-decoration-none d-inline d-md-none me-2" data-bs-dismiss="offcanvas" aria-label="Kembali">
        <i class="fa-solid fa-chevron-left"></i>
      </button>
      <h5 class="offcanvas-title">
        <i class="fa-solid fa-basket-shopping me-2"></i>Keranjang
      </h5>
      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body d-flex flex-column">
      <div id="cartItems" class="mb-3">
        <div class="empty-state">
          <i class="fa-regular fa-face-frown"></i>
          <p>Keranjang kosong</p>
        </div>
      </div>
      <div class="d-flex justify-content-between fw-bold fs-6">
        <span>Total</span>
        <span id="cartTotal">Rp0</span>
      </div>
      <div class="mt-3 d-grid gap-2">
        <button class="btn btn-outline-danger" id="btnClearCart">
          <i class="fa-solid fa-trash me-2"></i>Hapus Keranjang
        </button>
        <a href="#" target="_blank" id="btnCheckoutWA" class="btn btn-success">
          <i class="fab fa-whatsapp me-2"></i>Checkout via WhatsApp
        </a>
      </div>
    </div>
  </div>

  <!-- FLOATING BUTTONS -->
  <button class="floating-cart" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasCart">
    <i class="fa-solid fa-bag-shopping"></i>
    <span class="count" id="cartCount">0</span>
  </button>
  <button class="floating-dark" id="floatingDarkBtn" title="Toggle Tema">
    <i class="fa-solid fa-sun"></i>
  </button>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // ====== KONFIG WA ADMIN (kunci) ======
    const DEFAULT_WA = "6287809236556";

    // ====== UTIL ======
    const money = n => "Rp" + (Number(n)||0).toLocaleString("id-ID");
    const getStorage = (k,f)=>{try{return JSON.parse(localStorage.getItem(k))??f;}catch{return f;}};
    const setStorage = (k,v)=>localStorage.setItem(k,JSON.stringify(v));

    // ====== DATA PRODUK TANPA GOOGLE SHEET ======
    // Catatan:
    // - Kalau mau ubah / nambah layanan, EDIT DI SINI SAJA.
    // - group  = nama kelompok di kartu (judul besar)
    // - nama   = nama varian detail (misal "YouTube Premium 1 Bulan")
    // - harga  = harga jual (boleh sesuai aturan +5k dari BTT)
    // - harga_lama boleh 0 kalau nggak pakai harga coret.
    // - ikon   = path icon (nanti lu isi sendiri file PNG/SVG di repo lu)
    // - deskripsi = list bullet, pakai "||" antar poin biar rapi di modal.
    const produkVariants = [
      // YOUTUBE PREMIUM
      {
        group: "YouTube Premium",
        nama: "YouTube Premium 1 Bulan (Individual)",
        harga: 20000,
        harga_lama: 25000,
        kategori: "Streaming",
        ikon: "assets/icons/youtube.png",
        wa: DEFAULT_WA,
        stok: 99,
        kode: "YT-1",
        deskripsi: "Tonton tanpa iklan di semua perangkat||Termasuk YouTube Music||Support login multi-device sesuai ketentuan"
      },
      {
        group: "YouTube Premium",
        nama: "YouTube Premium 3 Bulan (Individual)",
        harga: 55000,
        harga_lama: 65000,
        kategori: "Streaming",
        ikon: "assets/icons/youtube.png",
        wa: DEFAULT_WA,
        stok: 99,
        kode: "YT-3",
        deskripsi: "Cocok untuk pemakaian jangka menengah||Harga lebih efisien dibanding per bulan||Bisa perpanjang langsung sebelum masa aktif habis"
      },

      // NETFLIX
      {
        group: "Netflix Premium",
        nama: "Netflix Premium 1 Bulan",
        harga: 45000,
        harga_lama: 55000,
        kategori: "Streaming",
        ikon: "assets/icons/netflix.png",
        wa: DEFAULT_WA,
        stok: 99,
        kode: "NF-1",
        deskripsi: "Kualitas hingga Full HD (menyesuaikan paket)||Bisa digunakan di TV, HP, dan laptop||Tersedia pilihan profil sesuai kebijakan"
      },
      {
        group: "Netflix Premium",
        nama: "Netflix Premium 3 Bulan",
        harga: 125000,
        harga_lama: 150000,
        kategori: "Streaming",
        ikon: "assets/icons/netflix.png",
        wa: DEFAULT_WA,
        stok: 99,
        kode: "NF-3",
        deskripsi: "Lebih hemat untuk pemakaian rutin||Dapat panduan singkat penggunaan||Dukungan bantuan selama masa aktif"
      },

      // SPOTIFY
      {
        group: "Spotify Premium",
        nama: "Spotify Premium 1 Bulan",
        harga: 20000,
        harga_lama: 25000,
        kategori: "Streaming",
        ikon: "assets/icons/spotify.png",
        wa: DEFAULT_WA,
        stok: 99,
        kode: "SP-1",
        deskripsi: "Tanpa iklan dan bisa download lagu||Playlist bisa diakses di semua device||Cocok untuk harian kerja & perjalanan"
      },
      {
        group: "Spotify Premium",
        nama: "Spotify Premium 3 Bulan",
        harga: 55000,
        harga_lama: 65000,
        kategori: "Streaming",
        ikon: "assets/icons/spotify.png",
        wa: DEFAULT_WA,
        stok: 99,
        kode: "SP-3",
        deskripsi: "Harga lebih efisien||Bisa digabung dengan paket hiburan lain||Panduan setting akan dikirim admin"
      },

      // CANVA + CAPCUT
      {
        group: "Canva Pro",
        nama: "Canva Pro 1 Bulan",
        harga: 25000,
        harga_lama: 30000,
        kategori: "Desain",
        ikon: "assets/icons/canva.png",
        wa: DEFAULT_WA,
        stok: 99,
        kode: "CV-1",
        deskripsi: "Akses template premium tanpa batas||Support untuk desain sosial media, presentasi, poster||Cocok untuk UMKM & konten harian"
      },
      {
        group: "Canva Pro + CapCut Pro",
        nama: "Canva Pro + CapCut Pro 1 Bulan",
        harga: 40000,
        harga_lama: 45000,
        kategori: "Desain",
        ikon: "assets/icons/canva_capcut.png",
        wa: DEFAULT_WA,
        stok: 99,
        kode: "CVC-1",
        deskripsi: "Paket hemat untuk desain dan editing video||Cocok untuk content creator dan bisnis online||Dibantu setup awal jika diperlukan"
      },
      {
        group: "CapCut Pro",
        nama: "CapCut Pro 1 Bulan",
        harga: 20000,
        harga_lama: 25000,
        kategori: "Software",
        ikon: "assets/icons/capcut.png",
        wa: DEFAULT_WA,
        stok: 99,
        kode: "CC-1",
        deskripsi: "Akses efek & template premium||Tanpa watermark sesuai kebijakan||Optimalkan workflow editing pendek"
      },

      // GOOGLE ONE + GEMINI
      {
        group: "Google One + Gemini",
        nama: "Google One 2TB + Gemini Advanced 1 Bulan",
        harga: 65000,
        harga_lama: 75000,
        kategori: "Penyimpanan",
        ikon: "assets/icons/googleone.png",
        wa: DEFAULT_WA,
        stok: 99,
        kode: "GO-2TB-1",
        deskripsi: "Penyimpanan 2TB untuk Gmail, Drive, dan Foto||Akses fitur Gemini Advanced sesuai ketentuan||Cocok untuk kerja dokumen & backup keluarga"
      },

      // CHATGPT / TOOLS AI
      {
        group: "ChatGPT / AI Tools",
        nama: "ChatGPT Private / AI Tools 1 Bulan",
        harga: 45000,
        harga_lama: 55000,
        kategori: "AI Tools",
        ikon: "assets/icons/chatgpt.png",
        wa: DEFAULT_WA,
        stok: 99,
        kode: "CGPT-1",
        deskripsi: "Akses AI untuk brainstorming, drafting, dan ide konten||Arahan pemakaian dasar akan dijelaskan||Cocok untuk pelajar, karyawan, dan pebisnis"
      },

      // VIDIO, VIU, APPLE MUSIC
      {
        group: "Vidio Platinum",
        nama: "Vidio Platinum 1 Bulan",
        harga: 25000,
        harga_lama: 30000,
        kategori: "Streaming",
        ikon: "assets/icons/vidio.png",
        wa: DEFAULT_WA,
        stok: 99,
        kode: "VD-1",
        deskripsi: "Akses tayangan lokal & olahraga tertentu||Detail paket akan dijelaskan admin||Cocok untuk penikmat liga lokal"
      },
      {
        group: "Viu Premium",
        nama: "Viu Premium 1 Bulan",
        harga: 20000,
        harga_lama: 25000,
        kategori: "Streaming",
        ikon: "assets/icons/viu.png",
        wa: DEFAULT_WA,
        stok: 99,
        kode: "VU-1",
        deskripsi: "Khusus pecinta drama Asia||Tanpa iklan sesuai kebijakan||Bisa digunakan di HP & TV"
      },
      {
        group: "Apple Music",
        nama: "Apple Music 1 Bulan",
        harga: 25000,
        harga_lama: 30000,
        kategori: "Streaming",
        ikon: "assets/icons/applemusic.png",
        wa: DEFAULT_WA,
        stok: 99,
        kode: "AM-1",
        deskripsi: "Integrasi penuh dengan ekosistem Apple||Kualitas audio tinggi||Cocok untuk pengguna iPhone/iPad"
      }
      // Tambah produk lain kalau mau, format sama seperti di atas
    ];

    // ====== GROUPING & VIEW ======
    let produkGroups = [];
    let viewData = [];
    let page = 1;
    const perPage = 12;
    const CART_KEY = "dnd_cart";
    const WISH_KEY = "dnd_wishlist";

    const produkListEl = document.getElementById("produk-list");
    const searchInput = document.getElementById("searchInput");
    const btnLoadMore = document.getElementById("btnLoadMore");

    const categoryIconsFA = {
      "Langganan":"fa-bell",
      "Streaming":"fa-tv",
      "Penyimpanan":"fa-hard-drive",
      "Software":"fa-puzzle-piece",
      "Desain":"fa-palette",
      "Produktivitas":"fa-book",
      "AI Tools":"fa-robot",
      "Keamanan":"fa-shield-halved",
      "Game":"fa-gamepad",
      "Voucher":"fa-gift"
    };

    function showLoading(){
      produkListEl.innerHTML = `
        <div class="col-12">
          <div class="loading"><div class="spinner"></div></div>
        </div>`;
    }

    function buildGroups(){
      const map = new Map();
      produkVariants.forEach((v, idx) => {
        const key = v.group || v.nama;
        let g = map.get(key);
        if(!g){
          g = {
            key,
            title: key,
            kategori: v.kategori || "",
            ikon: v.ikon || "",
            wa: v.wa || DEFAULT_WA,
            variants: [],
            minHarga: v.harga || 0,
            maxHargaLama: v.harga_lama || 0,
            available: Number(v.stok) > 0
          };
          map.set(key, g);
        }
        g.variants.push(v);
        if((v.harga || 0) < g.minHarga) g.minHarga = v.harga || 0;
        if((v.harga_lama || 0) > g.maxHargaLama) g.maxHargaLama = v.harga_lama || 0;
        if(Number(v.stok) > 0) g.available = true;
      });
      produkGroups = Array.from(map.values());
    }

    function applyFilterSort(){
      const q = (searchInput.value || "").toLowerCase();
      viewData = produkGroups.filter(g => {
        const inTitle = (g.title || "").toLowerCase().includes(q);
        const inVariants = g.variants.some(v => (v.nama || "").toLowerCase().includes(q));
        return inTitle || inVariants;
      });
      page = 1;
    }

    function renderProduk(append=false){
      const start = (page-1)*perPage;
      const slice = viewData.slice(start, start+perPage);

      if(!append) produkListEl.innerHTML = "";

      if(slice.length===0 && !append){
        produkListEl.innerHTML = `
          <div class="col-12">
            <div class="empty-state">
              <i class="fas fa-search"></i>
              <h4>Layanan tidak ditemukan</h4>
              <p>Coba ubah kata kunci pencarian.</p>
            </div>
          </div>`;
        btnLoadMore.style.display = "none";
        return;
      }

      slice.forEach((group, idx) => {
        const col = document.createElement("div");
        col.className = "col-lg-3 col-md-4 col-sm-6 col-6";

        const catIconClass = categoryIconsFA[group.kategori] || "fa-box";
        const hasDiscount = (group.maxHargaLama||0) > (group.minHarga||0);
        const stokOK = !!group.available;

        const wishlist = getStorage(WISH_KEY,[]);
        const wished = wishlist.includes(group.key);

        col.innerHTML = `
          <div class="card product-card fade-in" style="animation-delay:${idx*0.03}s">
            <button class="wishlist-btn ${wished?'active':''}" title="Favorit"
                    data-wish="${encodeURIComponent(group.key)}">
              <i class="fa-solid fa-heart"></i>
            </button>
            <div class="category-badge">
              <i class="fa-solid ${catIconClass}"></i>
              <span>${group.kategori || 'Layanan'}</span>
            </div>
            <div class="card-body p-3 text-center">
              <div class="product-icon">
                <img src="${group.ikon || ''}" alt="${group.title || ''}"
                     onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHJ4PSI4IiBmaWxsPSIjMGYxNzJhIiBzdHJva2U9IiM0ODY1NzkiIHN0cm9rZS13aWR0aD0iMSIvPjwvc3ZnPg=='">
              </div>
              <h6 class="product-title">${group.title || ''}</h6>
              <div class="price-wrap">
                <span class="price">Mulai ${money(group.minHarga)}</span>
                ${hasDiscount ? `<span class="price-old">${money(group.maxHargaLama)}</span>` : ""}
              </div>
              <div class="d-flex align-items-center justify-content-center gap-2 mb-2">
                <span class="badge ${stokOK?'bg-success-subtle text-success-emphasis':'bg-danger-subtle text-danger-emphasis'}">
                  ${stokOK?'Tersedia':'Habis'}
                </span>
                <span class="badge bg-secondary-subtle text-secondary-emphasis">
                  ${group.variants.length} varian
                </span>
              </div>
              <div class="product-actions d-flex">
                <button class="btn-detail icon-btn" ${stokOK?'':'disabled'}
                        data-detail="${idx+start}" aria-label="Lihat varian">
                  <i class="fa-solid fa-circle-info"></i>
                </button>
                <a class="quick-wa icon-btn ${stokOK?'':'disabled'}"
                   ${stokOK?'':'aria-disabled="true"'}
                   target="_blank"
                   href="https://wa.me/${encodeURIComponent(group.wa || DEFAULT_WA)}?text=${
                     encodeURIComponent('Halo admin, saya tertarik dengan '+group.title+'. Mohon info detail varian & harganya.')
                   }">
                  <i class="fa-brands fa-whatsapp"></i>
                </a>
              </div>
            </div>
          </div>
        `;
        produkListEl.appendChild(col);
      });

      btnLoadMore.style.display = (viewData.length > (start + slice.length)) ? "inline-block" : "none";
    }

    // ===== MODAL DETAIL =====
    const modalEl = document.getElementById("produkModal");
    const bsModal = new bootstrap.Modal(modalEl);
    const modalBody = document.getElementById("modalBody");
    const modalAddCart = document.getElementById("modalAddCart");
    let currentDetailIdx = null;

    function showDetailByGlobalIndex(globalIdx){
      const group = viewData[globalIdx];
      currentDetailIdx = globalIdx;

      const catIconClass = categoryIconsFA[group.kategori] || "fa-box";
      const primaryVariant = group.variants.find(v => Number(v.stok)>0) || group.variants[0];

      const variantsHTML = group.variants.map((v,i) => {
        const fitur = (v.deskripsi || "").toString().split("||").map(s => s.trim()).filter(Boolean)
          .map(li => `
            <li class="d-flex align-items-start gap-2 mb-1" style="font-size:.86rem;">
              <i class="fas fa-check-circle" style="font-size:.78rem;color:#22c55e;margin-top:.12rem;"></i>
              <span>${li}</span>
            </li>
          `).join("");

        const stokOK = Number(v.stok) > 0;

        return `
          <div class="border rounded-3 p-2 mb-3" style="background:rgba(15,23,42,.6);border-color:rgba(148,163,184,.6);">
            <div class="d-flex justify-content-between align-items-start mb-1">
              <div>
                <div class="fw-semibold" style="font-size:.95rem;">${v.nama}</div>
                <div class="small text-muted">Varian ${i+1}</div>
              </div>
              <div class="text-end">
                <div class="fw-bold" style="font-size:.95rem;color:#22c55e;">${money(v.harga)}</div>
                ${(v.harga_lama && v.harga_lama > v.harga) ? `<div class="small text-muted text-decoration-line-through">${money(v.harga_lama)}</div>` : ""}
                <div class="mt-1">
                  <span class="badge ${stokOK?'bg-success-subtle text-success-emphasis':'bg-danger-subtle text-danger-emphasis'}">
                    ${stokOK ? 'Tersedia' : 'Habis'}
                  </span>
                </div>
              </div>
            </div>
            ${fitur ? `<ul class="list-unstyled mb-2">${fitur}</ul>` : ""}
            <div class="d-flex gap-2 flex-wrap">
              <button class="btn btn-sm btn-outline-primary"
                      data-add-variant="${encodeURIComponent(v.nama)}"
                      ${stokOK ? '' : 'disabled'}>
                <i class="fa-solid fa-cart-plus me-1"></i>Keranjang
              </button>
              <a href="https://wa.me/${encodeURIComponent(v.wa || group.wa || DEFAULT_WA)}?text=${
                  encodeURIComponent('Halo admin, saya ingin pesan '+v.nama+' ('+money(v.harga)+')')
                }"
                target="_blank"
                class="btn btn-sm btn-success ${stokOK ? '' : 'disabled'}">
                <i class="fab fa-whatsapp me-1"></i>Pesan varian ini
              </a>
            </div>
          </div>
        `;
      }).join("");

      modalBody.innerHTML = `
        <div class="mb-3">
          <div class="row align-items-center g-3">
            <div class="col-md-4 text-center">
              <div class="product-icon mx-auto">
                <img src="${group.ikon || ''}" alt="${group.title || ''}"
                     style="width:60px;height:60px;"
                     onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHJ4PSIxMiIgZmlsbD0iIzFmMjEzMCIgc3Ryb2tlPSIjNGE1NWE5IiBzdHJva2Utd2lkdGg9IjEiLz48L3N2Zz4='">
              </div>
              <span class="badge mt-2" style="
                background:linear-gradient(135deg,#4f46e5,#22d3ee);
                color:#f9fafb;border-radius:999px;padding:.18rem .6rem;font-size:.75rem;font-weight:600;
              ">
                <i class="fa-solid ${catIconClass} me-1"></i>${group.kategori || 'Layanan Digital'}
              </span>
            </div>
            <div class="col-md-8">
              <h5 class="mb-1" style="font-weight:800;font-size:1.02rem;">${group.title || ''}</h5>
              <p class="small text-muted mb-2">
                Tersedia <strong>${group.variants.length} varian</strong> dengan harga mulai
                <strong>${money(group.minHarga)}</strong>.
              </p>
              <div class="d-flex align-items-baseline gap-2">
                <span style="font-size:1.05rem;font-weight:800;color:#22c55e;">${money(group.minHarga)}</span>
                ${(group.maxHargaLama && group.maxHargaLama>group.minHarga)
                  ? `<span class="small text-muted text-decoration-line-through">${money(group.maxHargaLama)}</span>`
                  : ""
                }
              </div>
            </div>
          </div>
        </div>
        <hr class="my-3"/>
        <div>${variantsHTML}</div>
      `;

      const modalPesanBtn = document.getElementById("modalPesanBtn");
      if(primaryVariant){
        modalPesanBtn.href =
          "https://wa.me/"+encodeURIComponent(primaryVariant.wa || group.wa || DEFAULT_WA)+
          "?text="+encodeURIComponent("Halo admin, saya ingin pesan "+primaryVariant.nama+" ("+money(primaryVariant.harga)+")");
        modalAddCart.disabled = !(Number(primaryVariant.stok)>0);
        modalAddCart.dataset.primaryVariant = primaryVariant.nama;
      }else{
        modalPesanBtn.href = "#";
        modalAddCart.disabled = true;
        delete modalAddCart.dataset.primaryVariant;
      }

      bsModal.show();
    }

    (function enableModalSwipeClose(){
      const content = document.getElementById("produkModalContent");
      let startY = null;
      content.addEventListener("touchstart", e => { startY = e.touches[0].clientY; }, {passive:true});
      content.addEventListener("touchmove", e => {
        if(startY === null) return;
        const dy = e.touches[0].clientY - startY;
        if(dy > 80){ startY = null; bsModal.hide(); }
      }, {passive:true});
      content.addEventListener("touchend", () => { startY = null; });
    })();

    modalBody.addEventListener("click", e => {
      const btn = e.target.closest("[data-add-variant]");
      if(!btn) return;
      const namaVar = decodeURIComponent(btn.dataset.addVariant);
      addToCart(namaVar,1);
      new bootstrap.Offcanvas("#offcanvasCart").show();
    });

    // ===== CART =====
    function getCart(){return getStorage(CART_KEY,[]);}
    function setCart(c){setStorage(CART_KEY,c);updateCartUI();}
    function addToCart(name,qty=1){
      const item = produkVariants.find(p=>p.nama===name);
      if(!item || !(Number(item.stok)>0)) return;
      const cart = getCart();
      const ex = cart.find(ci=>ci.nama===name);
      if(ex){ ex.qty += qty; }
      else { cart.push({nama:item.nama,harga:item.harga,wa:item.wa||DEFAULT_WA,qty}); }
      setCart(cart);
    }
    function removeFromCart(name){setCart(getCart().filter(ci=>ci.nama!==name));}
    function changeQty(name,delta){
      const cart = getCart();
      const it = cart.find(ci=>ci.nama===name);
      if(!it) return;
      it.qty = Math.max(1,(it.qty||1)+delta);
      setCart(cart);
    }
    function clearCart(){setCart([]);}

    function updateCartUI(){
      const cart = getCart();
      const totalQty = cart.reduce((a,b)=>a+(b.qty||1),0);
      document.getElementById("cartCount").textContent = totalQty;
      document.getElementById("navCartCount").textContent = totalQty;

      const wrap = document.getElementById("cartItems");
      if(cart.length===0){
        wrap.innerHTML = `
          <div class="empty-state">
            <i class="fa-regular fa-face-frown"></i>
            <p>Keranjang kosong</p>
          </div>`;
        document.getElementById("cartTotal").textContent = money(0);
        document.getElementById("btnCheckoutWA").href = "#";
        return;
      }

      let total = 0;
      wrap.innerHTML = cart.map(ci => {
        const sub = (ci.harga||0)*(ci.qty||1); total += sub;
        return `
          <div class="d-flex align-items-center justify-content-between border rounded-3 p-2 mb-2"
               style="border-color:rgba(148,163,184,.6);background:rgba(15,23,42,.8);">
            <div>
              <div class="fw-bold" style="font-size:.9rem;">${ci.nama}</div>
              <div class="text-muted small">${money(ci.harga)} × ${ci.qty}</div>
            </div>
            <div class="d-flex align-items-center gap-2">
              <button class="btn btn-sm btn-outline-secondary" data-qtyminus="${encodeURIComponent(ci.nama)}">-</button>
              <button class="btn btn-sm btn-outline-secondary" data-qtyplus="${encodeURIComponent(ci.nama)}">+</button>
              <button class="btn btn-sm btn-outline-danger" data-remove="${encodeURIComponent(ci.nama)}">
                <i class="fa-solid fa-trash"></i>
              </button>
            </div>
          </div>`;
      }).join("");

      document.getElementById("cartTotal").textContent = money(total);
      const lines = cart.map(ci => `• ${ci.nama} x${ci.qty} = ${money(ci.harga*ci.qty)}`).join("\n");
      const text =
        "Halo admin, saya ingin checkout:\n"+
        lines+"\n\nTotal: "+money(total)+"\n\nTerima kasih.";
      const uniqueWAs = [...new Set(cart.map(c=>c.wa||DEFAULT_WA))];
      const waTarget = uniqueWAs.length===1 ? uniqueWAs[0] : DEFAULT_WA;
      document.getElementById("btnCheckoutWA").href =
        "https://wa.me/"+encodeURIComponent(waTarget)+"?text="+encodeURIComponent(text);
    }

    document.getElementById("cartItems").addEventListener("click", e => {
      const t = e.target.closest("[data-qtyminus],[data-qtyplus],[data-remove]");
      if(!t) return;
      if(t.dataset.qtyminus){ changeQty(decodeURIComponent(t.dataset.qtyminus), -1); }
      else if(t.dataset.qtyplus){ changeQty(decodeURIComponent(t.dataset.qtyplus), +1); }
      else if(t.dataset.remove){ removeFromCart(decodeURIComponent(t.dataset.remove)); }
    });
    document.getElementById("btnClearCart").addEventListener("click", clearCart);

    // ===== NAVBAR & SEARCH =====
    function setNavOffset(){
      const nav = document.getElementById("mainNavbar");
      if(!nav) return;
      const h = nav.offsetHeight || 64;
      document.documentElement.style.setProperty("--nav-h", h+"px");
    }

    (function initNavbarSearch(){
      const searchBtns = document.querySelectorAll("[data-nav-search]");
      const searchOverlay = document.getElementById("searchOverlay");
      const btnCloseSearch = document.getElementById("btnCloseSearch");

      if(!searchBtns.length || !searchOverlay || !searchInput) return;

      function openSearch(){
        searchOverlay.classList.add("open");
        const produkSection = document.getElementById("produk");
        if(produkSection) produkSection.scrollIntoView({behavior:"smooth",block:"start"});
        setTimeout(()=>searchInput.focus(),120);
      }
      function closeSearch(){
        searchOverlay.classList.remove("open");
        searchInput.blur();
      }
      function toggleSearch(){
        if(searchOverlay.classList.contains("open")) closeSearch();
        else openSearch();
      }

      searchBtns.forEach(btn => btn.addEventListener("click", toggleSearch));
      if(btnCloseSearch) btnCloseSearch.addEventListener("click", closeSearch);
      document.addEventListener("keydown", e => { if(e.key==="Escape") closeSearch(); });
    })();

    document.addEventListener("click", e => {
      const a = e.target.closest("a[data-scroll][href^='#']");
      if(!a) return;
      e.preventDefault();
      const sel = a.getAttribute("href");
      const el = document.querySelector(sel);
      if(el) el.scrollIntoView({behavior:"smooth"});
      const coll = document.getElementById("mainNav");
      if(coll && coll.classList.contains("show")) new bootstrap.Collapse(coll).hide();
    });

    // ===== THEME =====
    (function initTheme(){
      const saved = localStorage.getItem("dnd_theme") || "dark";
      document.documentElement.setAttribute("data-theme",saved);
      const darkBtn = document.getElementById("floatingDarkBtn");
      const navBtn = document.getElementById("navDarkBtn");
      const setIcon = () => {
        const icon = document.documentElement.getAttribute("data-theme")==="dark" ? "fa-sun" : "fa-moon";
        darkBtn.innerHTML = `<i class="fa-solid ${icon}"></i>`;
        navBtn.innerHTML = `<i class="fa-solid ${icon}"></i>`;
      };
      setIcon();
      function toggleTheme(){
        const mode = document.documentElement.getAttribute("data-theme")==="dark" ? "light" : "dark";
        document.documentElement.setAttribute("data-theme",mode);
        localStorage.setItem("dnd_theme",mode);
        setIcon();
      }
      darkBtn.addEventListener("click", toggleTheme);
      navBtn.addEventListener("click", toggleTheme);
    })();

    // ===== WISHLIST & LIST EVENTS =====
    function toggleWishlist(key){
      const list = getStorage(WISH_KEY,[]);
      const i = list.indexOf(key);
      if(i>-1) list.splice(i,1);
      else list.push(key);
      setStorage(WISH_KEY,list);
    }

    searchInput.addEventListener("input", () => {
      applyFilterSort();
      renderProduk(false);
    });

    produkListEl.addEventListener("click", e => {
      const t = e.target.closest("[data-detail],[data-wish]");
      if(!t) return;
      if(t.dataset.detail!==undefined){
        showDetailByGlobalIndex(Number(t.dataset.detail));
      }else if(t.dataset.wish){
        const key = decodeURIComponent(t.dataset.wish);
        toggleWishlist(key);
        t.classList.toggle("active");
      }
    });

    document.getElementById("btnLoadMore").addEventListener("click", () => {
      page += 1;
      renderProduk(true);
    });

    document.getElementById("modalAddCart").addEventListener("click", () => {
      const primaryName = document.getElementById("modalAddCart").dataset.primaryVariant;
      if(!primaryName) return;
      addToCart(primaryName,1);
      new bootstrap.Offcanvas("#offcanvasCart").show();
    });

    // ===== INIT =====
    document.addEventListener("DOMContentLoaded", () => {
      setNavOffset();
      buildGroups();
      applyFilterSort();
      renderProduk(false);
      updateCartUI();
      const fy = document.getElementById("footerYear");
      if(fy){ fy.textContent = new Date().getFullYear(); }
    });
    window.addEventListener("resize", setNavOffset);
  </script>
</body>
</html>
